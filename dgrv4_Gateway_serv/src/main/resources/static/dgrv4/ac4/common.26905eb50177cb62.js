(self.webpackChunksrcAngular=self.webpackChunksrcAngular||[]).push([[8592],{75923:(g,m,s)=>{"use strict";s.d(m,{j:()=>c});var r=s(87587),l=s(93075),u=s(45682);let _=(()=>{class i{constructor(e,o){this.fb=e,this.toolService=o,this.disabled=!1,this.headerPolicy="0",this.headerPolicyNum=0,this.headerPolicyMask="*",this.change=new r.vpe,this.remove=new r.vpe,this.fieldExp=""}ngOnInit(){var e,o,h;this.form=this.fb.group({field:new l.NI(this.data?this.data.field:"")}),this.fieldExp="0"==this.headerPolicy||""==(null===(e=this.form.get("field"))||void 0===e?void 0:e.value)?"":`${null===(o=this.form.get("field"))||void 0===o?void 0:o.value}: [${this.toolService.maskStringByPolicy(null===(h=this.form.get("field"))||void 0===h?void 0:h.value,this.headerPolicy,this.headerPolicyNum,this.headerPolicyMask)}]`,this.form.valueChanges.subscribe(d=>{this.fieldExp=`${d.field}: [${this.toolService.maskStringByPolicy(d.field,this.headerPolicy,this.headerPolicyNum,this.headerPolicyMask)}]`,this.change.emit({field:d.field,no:this.no})})}delete(e){this._ref.destroy(),this.remove.emit(this.no)}}return i.\u0275fac=function(e){return new(e||i)(r.Y36(l.qu),r.Y36(u.g))},i.\u0275cmp=r.Xpm({type:i,selectors:[["app-fields-form-detail"]],inputs:{data:"data",_ref:"_ref",no:"no",disabled:"disabled",headerPolicy:"headerPolicy",headerPolicyNum:"headerPolicyNum",headerPolicyMask:"headerPolicyMask"},outputs:{change:"change",remove:"remove"},decls:8,vars:3,consts:[[1,"mb-1","col-12","px-0",2,"align-items","center","display","flex",3,"formGroup"],[1,"control-label","required","mr-1"],["type","text","name","field","formControlName","field",1,"form-control","col-6"],["type","button",1,"btn","tpi-primary","ml-1",2,"border-radius","50%",3,"hidden","click"],[1,"fa","fa-minus"],[1,"control-label","ml-1","col"]],template:function(e,o){1&e&&(r.TgZ(0,"div",0)(1,"label",1),r._uU(2,"Field"),r.qZA(),r._UZ(3,"input",2),r.TgZ(4,"button",3),r.NdJ("click",function(d){return o.delete(d)}),r._UZ(5,"i",4),r.qZA(),r.TgZ(6,"label",5),r._uU(7),r.qZA()()),2&e&&(r.Q6J("formGroup",o.form),r.xp6(4),r.Q6J("hidden",o.disabled),r.xp6(3),r.Oqu(o.fieldExp))},directives:[l.JL,l.sg,l.Fj,l.JJ,l.u],styles:[""]}),i})();const p=["fields"];function a(i,t){}let c=(()=>{class i{constructor(){this.disabled=!1,this.no=0,this.fieldList=[],this.headerPolicy="0",this.headerPolicyNum=0,this.headerPolicyMask="*"}ngOnInit(){}ngOnChanges(e){(e.headerPolicy||e.headerPolicyNum||e.headerPolicyMask)&&(e.headerPolicy&&(this.headerPolicy=e.headerPolicy.currentValue),e.headerPolicyNum&&(this.headerPolicyNum=e.headerPolicyNum.currentValue),e.headerPolicyMask&&(this.headerPolicyMask=e.headerPolicyMask.currentValue),this.refactFielsByChange())}refactFielsByChange(){this.fieldsRef.clear(),this.fieldList.forEach((e,o)=>{let h=this.fieldsRef.createComponent(_);h.instance._ref=h,h.instance.no=e.no,h.instance.data=this.fieldList[o],h.instance.headerPolicy=this.headerPolicy,h.instance.headerPolicyNum=this.headerPolicyNum,h.instance.headerPolicyMask=this.headerPolicyMask,h.instance.change.subscribe(d=>{let n=this.fieldList.findIndex(f=>f.no===d.no);this.fieldList[n].field=d.field,this.fieldList[n].no=d.no,this.onChange(this.formatFieldsToString(this.fieldList))}),h.instance.remove.subscribe(d=>{let n=this.fieldList.findIndex(f=>f.no===d);this.fieldList.splice(n,1),0==this.fieldList.length?(this.no=0,this.onChange(void 0),this.addFields()):this.onChange(this.formatFieldsToString(this.fieldList))})})}addFields(e){let o=this.fieldsRef.createComponent(_);this.fieldList.push(e?{field:e,no:this.no}:{field:"",no:this.no}),o.instance._ref=o,o.instance.no=this.no,o.instance.data=this.fieldList[this.no],o.instance.headerPolicy=this.headerPolicy,o.instance.headerPolicyNum=this.headerPolicyNum,o.instance.headerPolicyMask=this.headerPolicyMask,this.no++,this.onChange&&this.onChange(this.formatFieldsToString(this.fieldList)),o.instance.change.subscribe(h=>{let d=this.fieldList.findIndex(n=>n.no===h.no);this.fieldList[d].field=h.field,this.fieldList[d].no=h.no,this.onChange(this.formatFieldsToString(this.fieldList))}),o.instance.remove.subscribe(h=>{let d=this.fieldList.findIndex(n=>n.no===h);this.fieldList.splice(d,1),0==this.fieldList.length?(this.no=0,this.onChange(void 0),this.addFields()):this.onChange(this.formatFieldsToString(this.fieldList))})}formatFieldsToString(e){return e?e.map(o=>o.field.trim()).filter(o=>o&&""!=o.trim()).join(","):""}writeValue(e){this.initFields(e)}initFields(e){this.no=0,this.fieldList=[],this.fieldsRef.clear(),e&&""!=e.trim()?null==e||e.split(",").forEach(o=>{this.addFields(o)}):this.addFields()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=r.Xpm({type:i,selectors:[["app-fields-form"]],viewQuery:function(e,o){if(1&e&&r.Gf(p,7,r.s_b),2&e){let h;r.iGM(h=r.CRH())&&(o.fieldsRef=h.first)}},inputs:{headerPolicy:"headerPolicy",headerPolicyNum:"headerPolicyNum",headerPolicyMask:"headerPolicyMask"},features:[r._Bn([{provide:l.JU,useExisting:(0,r.Gpc)(()=>i),multi:!0}]),r.TTD],decls:7,vars:0,consts:[[1,"row"],["content",""],[1,"col-12","pr-0"],["fields",""],["type","button",1,"btn","tpi-second",2,"border-radius","50%",3,"click"],[1,"fa","fa-plus"]],template:function(e,o){1&e&&(r.TgZ(0,"div",0,1)(2,"div",2),r.YNc(3,a,0,0,"ng-template",null,3,r.W1O),r.TgZ(5,"button",4),r.NdJ("click",function(){return o.addFields()}),r._UZ(6,"i",5),r.qZA()()())},styles:[""]}),i})()},58838:(g,m,s)=>{"use strict";s.d(m,{n:()=>o});var r=s(27896),l=s(92340),u=s(57553),_=s(95244),a=s(87587),c=s(22313),i=s(45682),t=s(40704);const e=s(35117);let o=(()=>{class h{constructor(n,f,y,P){this.sanitizer=n,this.util=f,this.tool=y,this.alertService=P,this.reportID="",this.url="",this.timeRange=u.tn.Today}ngOnInit(){this.url=this.sanitizer.bypassSecurityTrustResourceUrl(""),this.search()}search(){let n=this.generateCAPI();this.timeRange&&this.util.queryReportUrls({reportID:this.reportID.toUpperCase(),timeRange:"T"}).subscribe(f=>{if(this.tool.checkDpSuccess(f.ResHeader)){let y="";y="localhost"==location.hostname||"127.0.0.1"==location.hostname?l.N.apiUrl:`${location.protocol}//${location.hostname}:${location.port}`;let P="";switch(f.RespBody.reportType){case"SYS_RPT":P=`${y}${f.RespBody.rpContentPath}/login?cuuid=${n.uuid}&capi_key=${n.capi}&reportURL=${f.RespBody.reportUrl}&embed=true`,this.url=this.sanitizer.bypassSecurityTrustResourceUrl(P);break;case"IFRAME":P=`${l.N.cusHostName}${f.RespBody.reportUrl}`,this.url=this.sanitizer.bypassSecurityTrustResourceUrl(P);break;case"LINK":P=`${f.RespBody.reportUrl}`,window.open(P,"_blank");break;default:this.alertService.ok("reportType not found","")}}})}generate_uuid(){var n=Date.now();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(n+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(f){var y=(n+16*Math.random())%16|0;return n=Math.floor(n/16),("x"===f?y:3&y|8).toString(16)})}generateCAPI(){let n=this.generate_uuid().toUpperCase(),f=this.encodeUUID(n);return"Error: Digest method not supported"===f&&(n="67C42D24-BCFD-40B1-99E9-C4CE4D9ADBCD",f="tflvB2FW3nhUIvF3PMHQxw"),{uuid:n,capi:f}}encodeUUID(n){if("string"!=typeof n||0===n.length)return"";const y=Uint8Array.of(128),P=new TextEncoder;try{let v=n.toLocaleUpperCase()+"TPIdigiRunner",R=P.encode(v),E=this.concatenate(Uint8Array,R,y),A=_("sha256").update(E).digest(),B=A.subarray(A.length/2,A.length);return e(B)}catch(v){return console.log("e",v),v}}concatenate(n,...f){let y=0;for(const R of f)y+=R.length;const P=new n(y);let v=0;for(const R of f)P.set(R,v),v+=R.length;return P}}return h.\u0275fac=function(n){return new(n||h)(a.Y36(c.H7),a.Y36(r.f),a.Y36(i.g),a.Y36(t.c))},h.\u0275cmp=a.Xpm({type:h,selectors:[["app-frame"]],inputs:{reportID:"reportID"},features:[a._Bn([r.f])],decls:2,vars:1,consts:[[1,"h-100"],["title","","width","100%","height","100%","frameborder","0",3,"src"]],template:function(n,f){1&n&&(a.TgZ(0,"div",0),a._UZ(1,"iframe",1),a.qZA()),2&n&&(a.xp6(1),a.Q6J("src",f.url,a.uOi))},styles:[""]}),h})()},58778:(g,m,s)=>{"use strict";s.d(m,{L:()=>_});var r=s(71764),u=s(87587);let _=(()=>{class p{transform(c,i){if(!c||20!=c.length)return;let e=c.substr(0,4),o=c.substr(4,2),h=c.substr(6,2),d=c.substr(9,2),n=c.substr(11,2),f=c.substr(13,2),y=c.slice(15);y=y.slice(0,3)+":"+y.slice(3);let P=r(`${e}-${o}-${h} ${d}:${n}:${f}`).toDate();return"time_ignore"===i?r(P).format("YYYY-MM-DD"):r(P).format("YYYY-MM-DD HH:mm:ss")}}return p.\u0275fac=function(c){return new(c||p)},p.\u0275pipe=u.Yjl({name:"datetime_format",type:p,pure:!0}),p})()},22751:(g,m,s)=>{"use strict";s.d(m,{Q:()=>l});var r=s(87587);let l=(()=>{class u{transform(p,a){return p?p.length>a?p.substring(0,a)+"...":p:""}}return u.\u0275fac=function(p){return new(p||u)},u.\u0275pipe=r.Yjl({name:"string_length",type:u,pure:!0}),u})()},78215:(g,m,s)=>{"use strict";s.d(m,{h:()=>p});var r=s(92340),l=s(57553),u=s(87587),_=s(96614);let p=(()=>{class a{constructor(i){this.api=i,this.api.baseUrl=r.N.dpPath}get basePath(){return r.N.isv4?"dgrv4/11":"tsmpdpaa/11"}signReq(i){let t={ReqHeader:this.api.getReqHeader(l.Nx.signReq),ReqBody:i};return this.api.npPost(`${this.basePath}/DPB0071`,t)}queryApiDpStatusLikeList_ignore1298(i){let t={ReqHeader:this.api.getReqHeader(l.Nx.queryApiDpStatusLikeList),ReqBody:i};return this.api.excuteNpPost_ignore1298(`${this.basePath}/DPB0072`,t)}queryApiDpStatusLikeList(i){let t={ReqHeader:this.api.getReqHeader(l.Nx.queryApiDpStatusLikeList),ReqBody:i};return this.api.npPost(`${this.basePath}/DPB0072`,t)}setApiPublicFlag(i){let t={ReqHeader:this.api.getReqHeader(l.Nx.setApiPublicFlag),ReqBody:i};return this.api.npPost(`${this.basePath}/DPB0073`,t)}}return a.\u0275fac=function(i){return new(i||a)(u.LFG(_.K))},a.\u0275prov=u.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},95536:(g,m,s)=>{"use strict";s.d(m,{B:()=>p});var r=s(92340),l=s(57553),u=s(87587),_=s(96614);let p=(()=>{class a{constructor(i){this.api=i}get npBasePath(){return r.N.isv4?"dgrv4/11":"tsmpdpaa/11"}queryTSecurityLV(i){let t={ReqHeader:this.api.getReqHeader(l.Nx.queryTSecurityLV),ReqBody:i};return this.api.npPost(`${this.npBasePath}/AA1102`,t)}addTGroupAuthority_before(){let i={ReqHeader:this.api.getReqHeader(l.Nx.addTGroupAuthority),ReqBody:{}};return this.api.npPost(`${this.npBasePath}/AA1106?before`,i)}addTGroupAuthority(i){let t={ReqHeader:this.api.getReqHeader(l.Nx.addTGroupAuthority),ReqBody:i};return this.api.npPost(`${this.npBasePath}/AA1106`,t)}updateTGroupAuthority_before(){let i={ReqHeader:this.api.getReqHeader(l.Nx.updateTGroupAuthority),ReqBody:{}};return this.api.npPost(`${this.npBasePath}/AA1108?before`,i)}updateTGroupAuthority(i){let t={ReqHeader:this.api.getReqHeader(l.Nx.updateTGroupAuthority),ReqBody:i};return this.api.npPost(`${this.npBasePath}/AA1108`,t)}queryTGroupAuthorityDetail(i){let t={ReqHeader:this.api.getReqHeader(l.Nx.queryTGroupAuthorityDetail),ReqBody:i};return this.api.npPost(`${this.npBasePath}/AA1109`,t)}deleteTGroupAuthority(i){let t={ReqHeader:this.api.getReqHeader(l.Nx.deleteTGroupAuthority),ReqBody:i};return this.api.npPost(`${this.npBasePath}/AA1110`,t)}queryScopeAuthorities_ignore1298(i){let t={ReqHeader:this.api.getReqHeader(l.Nx.queryScopeAuthorities),ReqBody:i};return this.api.excuteNpPost_ignore1298(`${this.npBasePath}/AA1115`,t)}queryScopeAuthorities(i){let t={ReqHeader:this.api.getReqHeader(l.Nx.queryScopeAuthorities),ReqBody:i};return this.api.npPost(`${this.npBasePath}/AA1115`,t)}}return a.\u0275fac=function(i){return new(i||a)(u.LFG(_.K))},a.\u0275prov=u.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},75809:(g,m,s)=>{"use strict";s.d(m,{A:()=>p});var r=s(92340),l=s(57553),u=s(87587),_=s(96614);let p=(()=>{class a{constructor(i){this.api=i,this.api.baseUrl=r.N.dpPath}get basePath(){return r.N.isv4?"dgrv4/11":"tsmpdpaa/11"}queryApiLov_ignore1298(i){let t={ReqHeader:this.api.getReqHeader(l.Nx.queryApiLov),ReqBody:i};return this.api.excuteNpPost_ignore1298(`${this.basePath}/DPB0075`,t)}queryApiLov(i){let t={ReqHeader:this.api.getReqHeader(l.Nx.queryApiLov),ReqBody:i};return this.api.npPost(`${this.basePath}/DPB0075`,t)}queryThemeLov_ignore1298(i){let t={ReqHeader:this.api.getReqHeader(l.Nx.queryThemeLov),ReqBody:i};return this.api.excuteNpPost_ignore1298(`${this.basePath}/DPB0076`,t)}queryThemeLov(i){let t={ReqHeader:this.api.getReqHeader(l.Nx.queryThemeLov),ReqBody:i};return this.api.npPost(`${this.basePath}/DPB0076`,t)}}return a.\u0275fac=function(i){return new(i||a)(u.LFG(_.K))},a.\u0275prov=u.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},20563:(g,m,s)=>{"use strict";s.d(m,{F:()=>a});var r=s(57553),l=s(92340),u=s(87587),_=s(96614),p=s(45682);let a=(()=>{class c{constructor(t,e){this.api=t,this.tool=e}get npBasePath(){return l.N.isv4?"dgrv4/11":"tsmpdpaa/11"}addRegHost_before(){let t={ReqHeader:this.api.getReqHeader(r.Nx.addRegHost),ReqBody:{}};return this.api.npPost(`${this.npBasePath}/AA0801?before`,t)}addRegHost(t){let e={ReqHeader:this.api.getReqHeader(r.Nx.addRegHost),ReqBody:t};return this.api.npPost(`${this.npBasePath}/AA0801`,e)}updateRegHost_before(){let t={ReqHeader:this.api.getReqHeader(r.Nx.updateRegHost),ReqBody:{}};return this.api.npPost(`${this.npBasePath}/AA0803?before`,t)}updateRegHost(t){let e={ReqHeader:this.api.getReqHeader(r.Nx.updateRegHost),ReqBody:t};return this.api.npPost(`${this.npBasePath}/AA0803`,e)}deleteRegHost(t){let e={ReqHeader:this.api.getReqHeader(r.Nx.deleteRegHost),ReqBody:t};return this.api.npPost(`${this.npBasePath}/AA0804`,e)}queryRegHostList_1_ignore1298(t){let e={ReqHeader:this.api.getReqHeader(r.Nx.queryRegHostList_1),ReqBody:t};return this.api.excuteNpPost_ignore1298(`${this.npBasePath}/AA0806`,e)}queryRegHostList_1(t){let e={ReqHeader:this.api.getReqHeader(r.Nx.queryRegHostList_1),ReqBody:t};return this.api.npPost(`${this.npBasePath}/AA0806`,e)}queryRegHostByRegHostID(t){let e={ReqHeader:this.api.getReqHeader(r.Nx.queryRegHostByRegHostID),ReqBody:t};return this.api.npPost(`${this.npBasePath}/AA0807`,e)}}return c.\u0275fac=function(t){return new(t||c)(u.LFG(_.K),u.LFG(p.g))},c.\u0275prov=u.Yz7({token:c,factory:c.\u0275fac}),c})()},79581:(g,m,s)=>{"use strict";var l=s(8708);function u(t,e){return void 0===e&&(e="utf8"),Buffer.isBuffer(t)?a(t.toString("base64")):a(Buffer.from(t,e).toString("base64"))}function p(t){return t=t.toString(),l.default(t).replace(/\-/g,"+").replace(/_/g,"/")}function a(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var i=u;i.encode=u,i.decode=function _(t,e){return void 0===e&&(e="utf8"),Buffer.from(p(t),"base64").toString(e)},i.toBase64=p,i.fromBase64=a,i.toBuffer=function c(t){return Buffer.from(p(t),"base64")},m.default=i},8708:(g,m)=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.default=function s(r){var u=r.length,_=u%4;if(!_)return r;var p=u,a=4-_,i=Buffer.alloc(u+a);for(i.write(r);a--;)i.write("=",p++);return i.toString()}},35117:(g,m,s)=>{g.exports=s(79581).default,g.exports.default=g.exports},94327:function(g,m){var l;void 0!==(l=function(){"use strict";function _(e,o,h){var d=new XMLHttpRequest;d.open("GET",e),d.responseType="blob",d.onload=function(){t(d.response,o,h)},d.onerror=function(){console.error("could not download file")},d.send()}function p(e){var o=new XMLHttpRequest;o.open("HEAD",e,!1);try{o.send()}catch(h){}return 200<=o.status&&299>=o.status}function a(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(h){var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(o)}}var c="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,i=c.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),t=c.saveAs||("object"!=typeof window||window!==c?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(e,o,h){var d=c.URL||c.webkitURL,n=document.createElement("a");n.download=o=o||e.name||"download",n.rel="noopener","string"==typeof e?(n.href=e,n.origin===location.origin?a(n):p(n.href)?_(e,o,h):a(n,n.target="_blank")):(n.href=d.createObjectURL(e),setTimeout(function(){d.revokeObjectURL(n.href)},4e4),setTimeout(function(){a(n)},0))}:"msSaveOrOpenBlob"in navigator?function(e,o,h){if(o=o||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function u(e,o){return void 0===o?o={autoBom:!1}:"object"!=typeof o&&(console.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,h),o);else if(p(e))_(e,o,h);else{var d=document.createElement("a");d.href=e,d.target="_blank",setTimeout(function(){a(d)})}}:function(e,o,h,d){if((d=d||open("","_blank"))&&(d.document.title=d.document.body.innerText="downloading..."),"string"==typeof e)return _(e,o,h);var n="application/octet-stream"===e.type,f=/constructor/i.test(c.HTMLElement)||c.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||n&&f||i)&&"undefined"!=typeof FileReader){var P=new FileReader;P.onloadend=function(){var E=P.result;E=y?E:E.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=E:location=E,d=null},P.readAsDataURL(e)}else{var v=c.URL||c.webkitURL,R=v.createObjectURL(e);d?d.location=R:location.href=R,d=null,setTimeout(function(){v.revokeObjectURL(R)},4e4)}});c.saveAs=t.saveAs=t,g.exports=t}.apply(m,[]))&&(g.exports=l)}}]);