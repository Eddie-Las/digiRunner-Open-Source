"use strict";(self.webpackChunksrcAngular=self.webpackChunksrcAngular||[]).push([[6912],{86912:(z,m,i)=>{i.r(m),i.d(m,{LdapModule:()=>A});var x=i(24783),a=i(93075),C=i(69808),h=i(92340),d=i(40520),b=i(68306),n=i(87587),M=i(45682),P=i(40704),O=i(4924),v=i(27896),_=i(24300),f=i(99291),w=i(3937),y=i(55679),L=i(51062);const Z=[{path:"",component:(()=>{class e{constructor(t,o,g,r,s,l,u,c,S,U,k){this.fb=t,this.httpClient=o,this.toolService=g,this.alertService=r,this.signBlockService=s,this.util=l,this.userService=u,this.router=c,this.ngxService=S,this.funcService=U,this.route=k,this.title="",this.imgSrc="",this.idpType="LDAP"}ngOnInit(){this.form=this.fb.group({uname:new a.NI(""),pwd:new a.NI("")}),this.route.queryParams.subscribe(t=>{t.type&&(this.idpType=t.type),this.getTitle(),this.getIcon()})}getTitle(){let t="";t="localhost"==location.hostname||"127.0.0.1"==location.hostname?h.N.apiUrl:`${location.protocol}//${location.hostname}:${location.port}`,t+=`/dgrv4/ssotoken/acidp/${this.idpType}/getTitle`;let o=new d.WM;this.httpClient.get(`${t}`,{headers:o,observe:"response",responseType:"text"}).subscribe(g=>{var r;this.title=null!==(r=g.body)&&void 0!==r?r:""})}getIcon(){let t="";t="localhost"==location.hostname||"127.0.0.1"==location.hostname?h.N.apiUrl:`${location.protocol}//${location.hostname}:${location.port}`,t+=`/dgrv4/ssotoken/acidp/${this.idpType}/getIcon`;let o=new d.WM;this.httpClient.get(`${t}`,{headers:o,observe:"response",responseType:"text"}).subscribe(g=>{var r;this.imgSrc=null!==(r=g.body)&&void 0!==r?r:""})}submitForm(){var t,o;let g=new URLSearchParams,r=new d.WM({"Content-Type":"application/x-www-form-urlencoded",digiRunner:"ldap process"});g.set("username",null===(t=this.uname)||void 0===t?void 0:t.value),g.set("password",null===(o=this.pwd)||void 0===o?void 0:o.value),this.httpClient.post(`${h.N.apiUrl}/dgrv4/ssotoken/acidp/${this.idpType}/acIdPLogin`,g,{headers:r,responseType:"text",observe:"response"}).subscribe(l=>{window.location.href=l.url})}setFuncList(){return new b.y(t=>{this.funcService.queryAllFunc().subscribe(o=>{this.toolService.checkDpSuccess(o.ResHeader)&&(this.toolService.setFuncList(o.RespBody.funcList),t.next(!0))})})}auth(t){let o=[];return new b.y(g=>{this.userService.queryFuncByLoginUser().subscribe(r=>{if(this.toolService.checkDpSuccess(r.ResHeader)){this.toolService.writeRoleFuncCodeList(r.RespBody.funcCodeList);for(let s=0;s<t.length;s++){const l=t[s];let u=r.RespBody.funcCodeList.findIndex(c=>c===l);o.findIndex(c=>c.funCode==l)<0?o.push({funCode:l,canExecute:u>=0}):u>=0&&(o[o.findIndex(c=>c.funCode==l)].canExecute=!0)}g.next(o)}})})}get uname(){return this.form.get("uname")}get pwd(){return this.form.get("pwd")}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(a.qu),n.Y36(d.eN),n.Y36(M.g),n.Y36(P.c),n.Y36(O.T),n.Y36(v.f),n.Y36(_.K),n.Y36(f.F0),n.Y36(w.LA),n.Y36(y.B),n.Y36(f.gz))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-ldap"]],decls:42,vars:27,consts:[[1,"login-page"],[1,"container",2,"min-width","600px","max-width","600px"],[1,"row","align-items-center","w-100","h-100",2,"margin-top","30%"],[1,"w-100","h-100","border","border-black","center"],[3,"formGroup","ngSubmit"],[2,"font-weight","bold"],[3,"src"],[1,"line",3,"hidden"],[2,"color","#EF622D","font-weight","600","font-size","24px"],[2,"color","#666666","font-weight","600","font-size","24px"],[1,"sign_box"],["for","uname",1,"control-label","float-left"],[1,"sign_row",2,"position","relative"],[2,"position","absolute","left","7px"],["src","assets/images/i_user.png","alt","number"],["type","text","formControlName","uname",1,"form-control",3,"placeholder"],["username",""],[2,"margin-left","8px","position","absolute","left","7px"],["src","assets/images/i_pwd.png","alt","pass",2,"width","25px","height","30px"],["type","password","formControlName","pwd",1,"form-control",3,"placeholder"],[1,"sign_row"],["type","submit",1,"btn","btn-login"]],template:function(t,o){1&t&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"form",4),n.NdJ("ngSubmit",function(){return o.submitForm()}),n.TgZ(6,"div")(7,"h1",5),n._UZ(8,"img",6),n._uU(9),n.qZA()(),n._UZ(10,"hr"),n.TgZ(11,"div",7)(12,"label",8),n._uU(13),n.ALo(14,"translate"),n.ALo(15,"translate"),n.qZA(),n._UZ(16,"br"),n.TgZ(17,"label",9),n._uU(18),n.ALo(19,"translate"),n.qZA()(),n.TgZ(20,"div",10)(21,"label",11),n._uU(22),n.ALo(23,"translate"),n.qZA(),n.TgZ(24,"div",12)(25,"span",13),n._UZ(26,"img",14),n.qZA(),n._UZ(27,"input",15,16),n.ALo(29,"translate"),n.qZA(),n.TgZ(30,"label",11),n._uU(31),n.ALo(32,"translate"),n.qZA(),n.TgZ(33,"div",12)(34,"span",17),n._UZ(35,"img",18),n.qZA(),n._UZ(36,"input",19),n.ALo(37,"translate"),n.qZA(),n.TgZ(38,"div",20)(39,"button",21),n._uU(40),n.ALo(41,"translate"),n.qZA()()()()()()()()()),2&t&&(n.xp6(5),n.Q6J("formGroup",o.form),n.xp6(3),n.Q6J("src",o.imgSrc,n.LSH),n.xp6(1),n.hij(" ",o.title," "),n.xp6(2),n.Q6J("hidden","API"==o.idpType),n.xp6(2),n.Oqu("LDAP"==o.idpType?n.lcZ(14,11,"adldap_login"):n.lcZ(15,13,"m_adldap_login")),n.xp6(5),n.hij("",n.lcZ(19,15,"continue_proc")," digiRunner"),n.xp6(4),n.Oqu(n.lcZ(23,17,"user_name")),n.xp6(5),n.Q6J("placeholder",n.lcZ(29,19,"user_name")),n.xp6(4),n.Oqu(n.lcZ(32,21,"user_password")),n.xp6(5),n.Q6J("placeholder",n.lcZ(37,23,"user_password")),n.xp6(4),n.Oqu(n.lcZ(41,25,"login")))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u],pipes:[L.X$],styles:['div.login[_ngcontent-%COMP%]{height:100%;width:100%;background:#ffffff}form.login_form[_ngcontent-%COMP%]{background-color:#fff;height:475px;width:381px;box-shadow:0 0 40px #bc7730}div.bg_img[_ngcontent-%COMP%]{font-family:PingFangSC-Regular,sans-serif;font-size:16px;margin:0;padding:0;background-color:#fbf9f6;font-weight:400;color:#5a5541;height:100%;background:#ff8f20;background:linear-gradient(135deg,#ffae22 0%,#ff8f20 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#ffae22",endColorstr="#ff8f20",GradientType=1);min-height:100%;display:flex;flex-direction:column}section.bg[_ngcontent-%COMP%], div.bg[_ngcontent-%COMP%]{height:100%;margin-left:0!important;margin-right:0!important}.sign[_ngcontent-%COMP%]{width:20%;height:475px;background-color:#fff;margin:100px auto 0;box-shadow:0 0 40px #bc7730;display:table}.logo_top[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90%}div.logo_top[_ngcontent-%COMP%]{padding-top:10px;background-color:#fff}div.logo_top[_ngcontent-%COMP%], i.logo_top[_ngcontent-%COMP%]{text-align:center;display:inherit;width:100%}.line[_ngcontent-%COMP%]{text-align:center;padding-top:30px;background-color:#fff}.line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:275px}.sign_row[_ngcontent-%COMP%]{text-align:center;padding:12px 0}.sign_row[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;padding-top:1px}.sign_box[_ngcontent-%COMP%]{padding:28px 20px;text-align:center;background:#fff}.date[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .sign_box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:46px;width:100%;font-size:20px;display:inline-block;padding:14px 10px 13px 50px;background-color:#fff;color:#666;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s;border:1px solid #B7B7B7;box-shadow:0 0 15px 10px #f8f8f8;border-radius:30px}.date[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:active{border:1px #27BEC5 solid}.date[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border:1px #27BEC5 solid;box-shadow:inset 0 0 #00000013,0 0 #66afe999}.sign_row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;margin-left:7px;margin-top:7px;align-items:center}.footer[_ngcontent-%COMP%]{position:fixed;text-align:center;bottom:0;width:100%;height:30px;line-height:30px;color:#666;background-color:#dedede;z-index:10}.index_footer[_ngcontent-%COMP%]{text-align:center;background-color:#5a5541;position:fixed;bottom:0}.login_bg[_ngcontent-%COMP%]{background-image:linear-gradient(to right,#ff8f20,#ffae22)}.btn-login[_ngcontent-%COMP%]{color:#fff;width:120px;height:35px;background:#666666;border-radius:50px;flex:none;order:2;flex-grow:0}.btn-login[_ngcontent-%COMP%]:hover{background:#EF622D}[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#999}[_ngcontent-%COMP%]:-moz-placeholder{color:#999}[_ngcontent-%COMP%]::-moz-placeholder{color:#999}[_ngcontent-%COMP%]:-ms-input-placeholder{color:#999}[_nghost-%COMP%]{display:block}.login-page[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;overflow:auto;background:#ffffff;text-align:center}.login-page[_ngcontent-%COMP%]   .col-lg-4[_ngcontent-%COMP%]{padding:0}.login-page[_ngcontent-%COMP%]   .input-lg[_ngcontent-%COMP%]{height:46px;padding:10px 16px;font-size:18px;line-height:1.3333333;border-radius:0}.login-page[_ngcontent-%COMP%]   .input-underline[_ngcontent-%COMP%]{background:0 0;border:none;box-shadow:none;border-bottom:2px solid rgba(255,255,255,.5);color:#fff;border-radius:0}.login-page[_ngcontent-%COMP%]   .input-underline[_ngcontent-%COMP%]:focus{border-bottom:2px solid #fff;box-shadow:none}.login-page[_ngcontent-%COMP%]   .rounded-btn[_ngcontent-%COMP%]{border-radius:50px;color:#fffc;background:#fff;border:2px solid rgba(255,255,255,.8);font-size:18px;line-height:40px;padding:0 25px}.login-page[_ngcontent-%COMP%]   .rounded-btn[_ngcontent-%COMP%]:hover, .login-page[_ngcontent-%COMP%]   .rounded-btn[_ngcontent-%COMP%]:focus, .login-page[_ngcontent-%COMP%]   .rounded-btn[_ngcontent-%COMP%]:active, .login-page[_ngcontent-%COMP%]   .rounded-btn[_ngcontent-%COMP%]:visited{color:#fff;border:2px solid white;outline:none}.login-page[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:400;margin-top:20px;margin-bottom:10px;font-size:36px}.login-page[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#ffffffb3}.login-page[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{padding:8px 0}.login-page[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#fff9!important}.login-page[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-moz-placeholder{color:#fff9!important}.login-page[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#fff9!important}.login-page[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-ms-input-placeholder{color:#fff9!important}.login-page[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]{padding:40px 0}.login-page[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{border-radius:50%;border:2px solid #fff}.login_section[_ngcontent-%COMP%]{background:#fff;font-size:16px;margin:0;background-color:#fbf9f6;font-weight:400}.login-base[_ngcontent-%COMP%]{position:absolute;z-index:1;left:0}.login-visual[_ngcontent-%COMP%]{position:absolute;z-index:3;left:6%}']}),e})()}];let T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[f.Bz.forChild(Z)],f.Bz]}),e})(),A=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[C.ez,a.u5,a.UX,x.m,T]]}),e})()}}]);