"use strict";(self.webpackChunksrcAngular=self.webpackChunksrcAngular||[]).push([[6071],{16071:(T,f,e)=>{e.r(f),e.d(f,{IdpssoModule:()=>R});var x=e(18505),u=e(68306),n=e(87587),p=e(99291),m=e(45682),M=e(40520),O=e(4924),P=e(24300),v=e(27896),_=e(55679),k=e(40704),h=e(69808),C=e(48185),S=e(51062);function w(t,a){1&t&&n._UZ(0,"p-progressBar",19)}const y=[{path:"",component:(()=>{class t{constructor(o,i,g,r,d,l,s,c,I){this.route=o,this.toolService=i,this.router=g,this.http=r,this.signBlockService=d,this.userService=l,this.util=s,this.funcService=c,this.alertService=I,this.msg="Loading...",this.btnDisabled=!0,this.processShow=!0}ngOnInit(){this.route.queryParams.subscribe(o=>{o.msg&&null==o.dgRcode&&(this.msg=this.toolService.Base64Decoder(o.msg),this.processShow=!1),o.dgRcode&&this.getToken(o.dgRcode)}),setTimeout(()=>{this.btnDisabled=!1},1e3)}returnToLogin(){this.router.navigate(["/login"]).then(()=>{window.location.reload()})}getToken(o){const i=`${location.protocol}//${location.host}/dgrv4/ssotoken/acidp/oauth/token?dgRcode=${o}`;this.http.get(i).subscribe(g=>{if(g&&g.access_token)this.toolService.setTokenInfo(g),this.toolService.writeToken(g.access_token),this.toolService.writeToken(JSON.stringify(this.toolService.decodeToken()),"decode_token"),this.signBlockService.getSignBlock().subscribe(r=>{this.toolService.checkSuccess(r.ResHeader)&&(this.toolService.writeSignBlock(r.Res_getSignBlock.signBlock),this.util.getAcConf().subscribe(d=>{this.toolService.checkDpSuccess(d.ResHeader)&&(this.toolService.writeAcConf(JSON.stringify(d.RespBody)),this.auth(["AC0004","AC0005","AC0102","AC0203","AC0204","AC0205","AC0221","AC0223","AC0224","AC0225","AC0226","AC0302","AC0304","AC0305","AC0318","AC0505"]).subscribe(s=>{this.toolService.setHyperLinkAuth(s)}),this.userService.queryUserDataByLoginUser().subscribe(s=>{this.toolService.checkDpSuccess(s.ResHeader)&&(this.toolService.setUserID(s.RespBody.userID),this.toolService.setUserAlias(s.RespBody.userAlias?s.RespBody.userAlias:""),s.RespBody.idTokenJwtstr&&sessionStorage.setItem("idTokenJwtstr",s.RespBody.idTokenJwtstr),this.setFuncList().pipe((0,x.b)(c=>{c&&this.router.navigateByUrl("/dashboard")})).subscribe())}))}))});else{let r=g.ResHeader;this.alertService.ok(r.rtnCode,r.rtnMsg)}})}auth(o){let i=[];return new u.y(g=>{this.userService.queryFuncByLoginUser().subscribe(r=>{if(this.toolService.checkDpSuccess(r.ResHeader)){this.toolService.writeRoleFuncCodeList(r.RespBody.funcCodeList);for(let d=0;d<o.length;d++){const l=o[d];let s=r.RespBody.funcCodeList.findIndex(c=>c===l);i.findIndex(c=>c.funCode==l)<0?i.push({funCode:l,canExecute:s>=0}):s>=0&&(i[i.findIndex(c=>c.funCode==l)].canExecute=!0)}g.next(i)}})})}setFuncList(){return new u.y(o=>{this.funcService.queryAllFunc().subscribe(i=>{this.toolService.checkDpSuccess(i.ResHeader)&&(this.toolService.setFuncList(i.RespBody.funcList),o.next(!0))})})}}return t.\u0275fac=function(o){return new(o||t)(n.Y36(p.gz),n.Y36(m.g),n.Y36(p.F0),n.Y36(M.eN),n.Y36(O.T),n.Y36(P.K),n.Y36(v.f),n.Y36(_.B),n.Y36(k.c))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-idpsso"]],decls:24,vars:6,consts:[[1,"login-page"],[1,"row","col-12","h-100","p-0"],[1,"col-7","h-100"],["src","assets/images/login_left_base.png","alt","",1,"w-100","h-100","login-base"],["src","assets/images/img_login_visual.png","alt","",1,"w-100","h-100","login-visual"],[1,"col-5","h-100"],[1,"row","justify-content-md-center","bg",2,"padding-top","15vh"],[2,"width","380px"],[1,"login_section"],[1,"logo_top"],["src","assets/images/DigiFusion_digiRunner_logo_horizontal.png","alt","","title","v202102251030-v3"],[1,"line"],[2,"color","#EF622D","font-weight","600","font-size","24px"],["mode","indeterminate",4,"ngIf"],[1,"sign_box"],[1,"sign_row"],["type","button",1,"btn","btn-login",3,"disabled","click"],[1,"footer"],[1,"container"],["mode","indeterminate"]],template:function(o,i){1&o&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2),n._UZ(3,"img",3)(4,"img",4),n.qZA(),n.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"section",8)(9,"div",9),n._UZ(10,"img",10),n.qZA(),n.TgZ(11,"div",11)(12,"label",12),n._uU(13),n.qZA(),n.YNc(14,w,1,0,"p-progressBar",13),n.qZA(),n.TgZ(15,"div",14)(16,"div",15)(17,"button",16),n.NdJ("click",function(){return i.returnToLogin()}),n._uU(18),n.ALo(19,"translate"),n.qZA()()()()()()()()(),n.TgZ(20,"footer",17)(21,"div",18)(22,"span"),n._uU(23,"Copyright\xa9 TPIsoftware. All Rights Reserved. "),n.qZA()()()),2&o&&(n.xp6(13),n.Oqu(i.msg),n.xp6(1),n.Q6J("ngIf",i.processShow),n.xp6(3),n.Q6J("disabled",i.btnDisabled),n.xp6(1),n.hij(" ",n.lcZ(19,4,"button.confirm")," "))},directives:[h.O5,C.k],pipes:[S.X$],styles:['div.login[_ngcontent-%COMP%]{height:100%;width:100%;background:#ffffff}form.login_form[_ngcontent-%COMP%]{background-color:#fff;height:475px;width:381px;box-shadow:0 0 40px #bc7730}div.bg_img[_ngcontent-%COMP%]{font-family:PingFangSC-Regular,sans-serif;font-size:16px;margin:0;padding:0;background-color:#fbf9f6;font-weight:400;color:#5a5541;height:100%;background:#ff8f20;background:linear-gradient(135deg,#ffae22 0%,#ff8f20 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#ffae22",endColorstr="#ff8f20",GradientType=1);min-height:100%;display:flex;flex-direction:column}section.bg[_ngcontent-%COMP%], div.bg[_ngcontent-%COMP%]{height:100%;margin-left:0!important;margin-right:0!important}.sign[_ngcontent-%COMP%]{width:20%;height:475px;background-color:#fff;margin:100px auto 0;box-shadow:0 0 40px #bc7730;display:table}.logo_top[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:350px}div.logo_top[_ngcontent-%COMP%]{padding-top:65px;background-color:#fff}div.logo_top[_ngcontent-%COMP%], i.logo_top[_ngcontent-%COMP%]{text-align:center;display:inherit;width:100%}.line[_ngcontent-%COMP%]{text-align:center;padding-top:30px;background-color:#fff}.line[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:275px}.sign_row[_ngcontent-%COMP%]{text-align:center;padding:12px 0}.sign_row[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;padding-top:1px}.sign_box[_ngcontent-%COMP%]{padding:28px 0;text-align:center;background:#fff}.date[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .sign_box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:46px;width:100%;font-size:20px;display:inline-block;padding:14px 10px 13px 50px;background-color:#fff;color:#666;-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075);transition:border-color ease-in-out .15s,box-shadow ease-in-out .15s;border:1px solid #B7B7B7;box-shadow:0 0 15px 10px #f8f8f8;border-radius:30px}.date[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:active{border:1px #27BEC5 solid}.date[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border:1px #27BEC5 solid;box-shadow:inset 0 0 #00000013,0 0 #66afe999}.sign_row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;margin-left:7px;margin-top:7px;align-items:center}.footer[_ngcontent-%COMP%]{position:fixed;text-align:center;bottom:0;width:100%;height:30px;line-height:30px;color:#666;background-color:#dedede;z-index:10}.index_footer[_ngcontent-%COMP%]{text-align:center;background-color:#5a5541;position:fixed;bottom:0}.login_bg[_ngcontent-%COMP%]{background-image:linear-gradient(to right,#ff8f20,#ffae22)}.btn-login[_ngcontent-%COMP%]{color:#fff;width:120px;height:35px;background:#666666;border-radius:50px;flex:none;order:2;flex-grow:0}.btn-login[_ngcontent-%COMP%]:hover{background:#EF622D}[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#999}[_ngcontent-%COMP%]:-moz-placeholder{color:#999}[_ngcontent-%COMP%]::-moz-placeholder{color:#999}[_ngcontent-%COMP%]:-ms-input-placeholder{color:#999}[_nghost-%COMP%]{display:block}.login-page[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;overflow:auto;background:#ffffff;text-align:center}.login-page[_ngcontent-%COMP%]   .col-lg-4[_ngcontent-%COMP%]{padding:0}.login-page[_ngcontent-%COMP%]   .input-lg[_ngcontent-%COMP%]{height:46px;padding:10px 16px;font-size:18px;line-height:1.3333333;border-radius:0}.login-page[_ngcontent-%COMP%]   .input-underline[_ngcontent-%COMP%]{background:0 0;border:none;box-shadow:none;border-bottom:2px solid rgba(255,255,255,.5);color:#fff;border-radius:0}.login-page[_ngcontent-%COMP%]   .input-underline[_ngcontent-%COMP%]:focus{border-bottom:2px solid #fff;box-shadow:none}.login-page[_ngcontent-%COMP%]   .rounded-btn[_ngcontent-%COMP%]{border-radius:50px;color:#fffc;background:#fff;border:2px solid rgba(255,255,255,.8);font-size:18px;line-height:40px;padding:0 25px}.login-page[_ngcontent-%COMP%]   .rounded-btn[_ngcontent-%COMP%]:hover, .login-page[_ngcontent-%COMP%]   .rounded-btn[_ngcontent-%COMP%]:focus, .login-page[_ngcontent-%COMP%]   .rounded-btn[_ngcontent-%COMP%]:active, .login-page[_ngcontent-%COMP%]   .rounded-btn[_ngcontent-%COMP%]:visited{color:#fff;border:2px solid white;outline:none}.login-page[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:400;margin-top:20px;margin-bottom:10px;font-size:36px}.login-page[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#ffffffb3}.login-page[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{padding:8px 0}.login-page[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#fff9!important}.login-page[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-moz-placeholder{color:#fff9!important}.login-page[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#fff9!important}.login-page[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-ms-input-placeholder{color:#fff9!important}.login-page[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]{padding:40px 0}.login-page[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{border-radius:50%;border:2px solid #fff}.login_section[_ngcontent-%COMP%]{background:#fff;font-size:16px;margin:0;background-color:#fbf9f6;font-weight:400}.login-base[_ngcontent-%COMP%]{position:absolute;z-index:1;left:0}.login-visual[_ngcontent-%COMP%]{position:absolute;z-index:3;left:6%}']}),t})()}];let A=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[p.Bz.forChild(y)],p.Bz]}),t})();var B=e(24783),b=e(93075);let R=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[h.ez,A,B.m,b.UX,b.u5,C.q]]}),t})()}}]);