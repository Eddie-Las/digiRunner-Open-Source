"use strict";(self.webpackChunksrcAngular=self.webpackChunksrcAngular||[]).push([[8530],{55069:(O,q,s)=>{s.d(q,{V:()=>lt});var r=s(15861),c=s(14525),e=s(87587),m=s(93075),f=s(57553),h=s(71764),b=s(45682),o=s(22734),n=s(71330),p=s(45330),u=s(40845),y=s(69808),g=s(23099),P=s(59783),Z=s(51062);function D(a,l){1&a&&e._UZ(0,"col"),2&a&&e.Udp("width",l.$implicit.width)}function K(a,l){if(1&a&&(e.TgZ(0,"colgroup"),e._UZ(1,"col",15),e.YNc(2,D,1,2,"col",16),e.qZA()),2&a){const t=l.$implicit;e.xp6(2),e.Q6J("ngForOf",t)}}function N(a,l){if(1&a&&(e.TgZ(0,"th",19),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.Udp("width",t.width),e.xp6(1),e.hij(" ",t.header," ")}}function L(a,l){if(1&a&&(e.TgZ(0,"tr")(1,"th",17),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.YNc(3,N,2,3,"th",18),e.qZA()),2&a){const t=l.$implicit;e.xp6(3),e.Q6J("ngForOf",t)}}function I(a,l){if(1&a&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&a){const t=e.oxw(2).$implicit;e.xp6(1),e.lnq(" (",t.apiKey,",",t.moduleName,") - ",t.apiName," ")}}function E(a,l){if(1&a&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit,i=e.oxw().$implicit;e.xp6(1),e.hij(" ",i[t.field]," ")}}function w(a,l){1&a&&(e.TgZ(0,"span"),e._uU(1,"\uff0c"),e.qZA())}function F(a,l){if(1&a&&(e.TgZ(0,"span"),e._uU(1),e.YNc(2,w,2,0,"span",21),e.qZA()),2&a){const t=l.$implicit,i=l.index,d=e.oxw(2).$implicit,_=e.oxw().$implicit,A=e.oxw(2);e.xp6(1),e.hij(" ",t.value," "),e.xp6(1),e.Q6J("ngIf",A.checkLength(_[d.field],i))}}function U(a,l){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,F,3,2,"span",22),e.ALo(2,"keyvalue"),e.qZA()),2&a){const t=e.oxw().$implicit,i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,i[t.field]))}}function B(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"span")(1,"a",23),e.NdJ("click",function(){e.CHM(t);const d=e.oxw(2).$implicit;return e.oxw(2).downloadFile(d.filePath,d.fileName)}),e._uU(2),e.qZA()()}if(2&a){const t=e.oxw().$implicit,i=e.oxw().$implicit;e.xp6(2),e.hij(" ",i[t.field]," ")}}function Y(a,l){if(1&a&&(e.TgZ(0,"td"),e.YNc(1,I,2,3,"span",21),e.YNc(2,E,2,1,"span",21),e.YNc(3,U,3,3,"div",21),e.YNc(4,B,3,1,"span",21),e.qZA()),2&a){const t=l.$implicit;e.Udp("width",t.width),e.xp6(1),e.Q6J("ngIf","apiName"==t.field),e.xp6(1),e.Q6J("ngIf","apiName"!=t.field&&"themeDatas"!=t.field&&"fileName"!=t.field),e.xp6(1),e.Q6J("ngIf","themeDatas"==t.field),e.xp6(1),e.Q6J("ngIf","fileName"==t.field)}}function M(a,l){if(1&a&&(e.TgZ(0,"tr")(1,"td"),e._UZ(2,"p-tableCheckbox",20),e.qZA(),e.YNc(3,Y,5,6,"td",16),e.qZA()),2&a){const t=l.$implicit,i=l.columns;e.xp6(2),e.Q6J("value",t),e.xp6(1),e.Q6J("ngForOf",i)}}function H(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td",24)(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).moreData()}),e._uU(6),e.ALo(7,"translate"),e._UZ(8,"i",26),e.qZA()()()}if(2&a){const t=e.oxw().$implicit,i=e.oxw(2);e.xp6(1),e.uIk("colspan",t.length+1),e.xp6(2),e.AsE("",e.lcZ(4,4,"row_count"),": ",i.rowcount,""),e.xp6(3),e.hij("",e.lcZ(7,6,"button.more")," ")}}function k(a,l){if(1&a&&e.YNc(0,H,9,8,"tr",21),2&a){const t=e.oxw(2);e.Q6J("ngIf",t.rowcount)}}function J(a,l){if(1&a&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&a){const t=l.$implicit;e.xp6(1),e.uIk("colspan",t.length+1),e.xp6(1),e.hij(" ",e.lcZ(3,2,"no_rec")," ")}}const S=function(){return{"word-break":"break-word"}};function $(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"p-table",9),e.NdJ("selectionChange",function(d){return e.CHM(t),e.oxw().selectedApis=d}),e.YNc(1,K,3,1,"ng-template",10),e.YNc(2,L,4,1,"ng-template",11),e.YNc(3,M,4,2,"ng-template",12),e.YNc(4,k,1,1,"ng-template",13),e.YNc(5,J,4,4,"ng-template",14),e.qZA()}if(2&a){const t=e.oxw();e.Akn(e.DdM(5,S)),e.Q6J("columns",t.cols)("value",t.dataList)("selection",t.selectedApis)}}let Q=(()=>{class a{constructor(t,i,d,_,A){this.tool=t,this.file=i,this.openApiService=d,this.ref=_,this.config=A,this.keyword="",this.cols=[],this.dataList=new Array,this.selectedApis=new Array,this.rowcount=0}ngOnInit(){var t=this;return(0,r.Z)(function*(){t.keyword=t.config.data.data.keyword;const d=yield t.tool.getDict(["api_name","api_desc","org_name","theme_name","api_doc"]);t.cols=[{field:"apiName",header:d.api_name},{field:"apiDesc",header:d.api_desc},{field:"orgName",header:d.org_name},{field:"themeDatas",header:d.theme_name},{field:"fileName",header:d.api_doc}],t.searchAPI()})()}searchAPI(){this.openApiService.queryApiLikeList({keyword:this.keyword}).subscribe(i=>{this.tool.checkDpSuccess(i.ResHeader)&&(this.dataList=i.RespBody.dataList,this.rowcount=this.dataList.length)})}moreData(){this.openApiService.queryApiLikeList({apiKey:this.dataList[this.dataList.length-1].apiKey,moduleName:this.dataList[this.dataList.length-1].moduleName,keyword:this.keyword}).subscribe(i=>{this.tool.checkDpSuccess(i.ResHeader)&&(this.dataList=this.dataList.concat(i.RespBody.dataList),this.rowcount=this.dataList.length)})}chooseAPI(){this.ref.close(this.selectedApis)}checkLength(t,i){return Object.keys(t).length>1&&i+1!=Object.keys(t).length}downloadFile(t,i){this.file.downloadFile({filePath:t}).subscribe(_=>{const A=new FileReader;A.onloadend=function(){const T=new File([_],i),v=window.URL.createObjectURL(T),x=document.createElement("a");document.body.appendChild(x),x.setAttribute("style","display: none"),x.href=v,x.download=i,x.click(),window.URL.revokeObjectURL(v),x.remove()},A.readAsText(_)})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(b.g),e.Y36(o.I),e.Y36(n.l),e.Y36(p.E7),e.Y36(p.S))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-api-list"]],inputs:{data:"data"},outputs:{close:"close"},decls:14,vars:8,consts:[[1,"container","py-1"],[1,"row"],[1,"col-12","col-sm-12"],[1,"ui-inputgroup"],["type","search",1,"form-control",3,"placeholder","ngModel","keyup.enter","ngModelChange"],["pButton","","type","button","icon","pi pi-search",1,"tpi-night","ml-1",3,"click"],["styleClass","p-datatable-striped",3,"columns","value","selection","style","selectionChange",4,"ngIf"],[1,"text-center"],["type","button",1,"btn","tpi-btn","tpi-primary",3,"click"],["styleClass","p-datatable-striped",3,"columns","value","selection","selectionChange"],["pTemplate","colgroup"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["pTemplate","emptymessage"],[2,"width","2.25em"],[3,"width",4,"ngFor","ngForOf"],["scope","col",2,"width","2.25em"],["scope","col",3,"width",4,"ngFor","ngForOf"],["scope","col"],[3,"value"],[4,"ngIf"],[4,"ngFor","ngForOf"],["href","javascript:void(0)",3,"click"],[2,"color","#b7b7b7"],["type","button",1,"btn","tpi-header-return",3,"click"],[1,"fas","fa-angle-double-right",2,"margin-left","5px"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),e.NdJ("keyup.enter",function(){return i.searchAPI()})("ngModelChange",function(_){return i.keyword=_}),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return i.searchAPI()}),e.qZA()()()(),e._UZ(7,"br"),e.YNc(8,$,6,6,"p-table",6),e._UZ(9,"br"),e.TgZ(10,"div",7)(11,"button",8),e.NdJ("click",function(){return i.chooseAPI()}),e._uU(12),e.ALo(13,"translate"),e.qZA()()()),2&t&&(e.xp6(4),e.s9C("placeholder",e.lcZ(5,4,"keyword_search")),e.Q6J("ngModel",i.keyword),e.xp6(4),e.Q6J("ngIf",i.cols),e.xp6(4),e.Oqu(e.lcZ(13,6,"button.save")))},directives:[m.Fj,m.JJ,m.On,u.Hq,y.O5,g.iA,P.jx,y.sg,g.Mo,g.UA],pipes:[Z.X$,y.Nd],styles:[""]}),a})();var R=s(1694),j=s(39646),W=s(99291),G=s(56435),V=s(3937),z=s(37410),X=s(1955),ee=s(75652),te=s(86561);const ae=["dialog"];function ie(a,l){if(1&a&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Oqu(t.data.data.clientId)}}function oe(a,l){if(1&a&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Oqu(t.data.data.openApiKey.clientId)}}function ne(a,l){if(1&a&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Oqu(t.data.data.clientName)}}function pe(a,l){if(1&a&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Oqu(t.data.data.openApiKey.clientName)}}function le(a,l){if(1&a&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Oqu(t.data.data.clientAlias)}}function re(a,l){if(1&a&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Oqu(t.data.data.openApiKey.clientAlias)}}function se(a,l){if(1&a&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Oqu(t.data.data.reqDate)}}function ce(a,l){if(1&a&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Oqu(t.data.data.createDateTime)}}function de(a,l){if(1&a&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Oqu(t.data.data.userName)}}function _e(a,l){if(1&a&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Oqu(t.data.data.applyUserName)}}function ue(a,l){if(1&a&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Oqu(t.data.data.reqSubtypeName)}}function me(a,l){if(1&a&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Oqu(t.data.data.subTitle)}}function he(a,l){if(1&a&&(e.TgZ(0,"div",25)(1,"small",26),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&a){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,1,t.effectiveDate.errors.isRequired))}}function fe(a,l){if(1&a&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Oqu(t.data.data.openApiKey)}}function Ae(a,l){if(1&a&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Oqu(t.data.data.openApiKey.openApiKey)}}function ye(a,l){if(1&a&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Oqu(t.data.data.openApiKey.openApiKey)}}function ge(a,l){if(1&a&&(e.TgZ(0,"div",2)(1,"div",16)(2,"label",4),e._uU(3,"Open API Key"),e.qZA(),e._uU(4,"\uff1a "),e.YNc(5,fe,2,1,"label",5),e.YNc(6,Ae,2,1,"label",5),e.YNc(7,ye,2,1,"label",5),e.qZA()()),2&a){const t=e.oxw();e.xp6(5),e.Q6J("ngIf",t.data.operate==t.formOperate.create),e.xp6(1),e.Q6J("ngIf",t.data.operate==t.formOperate.update),e.xp6(1),e.Q6J("ngIf",t.data.operate==t.formOperate.resend)}}function be(a,l){1&a&&e._UZ(0,"input",27)}function qe(a,l){if(1&a&&(e.TgZ(0,"div",25)(1,"small",26),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"small",26),e._uU(5),e.ALo(6,"translate"),e.qZA()()),2&a){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,t.openApiKeyAlias.errors.isRequired)),e.xp6(3),e.Oqu(e.lcZ(6,4,t.openApiKeyAlias.errors.maxlength))}}function xe(a,l){if(1&a&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Oqu(t.checkFromOperation()?t.data.data.openApiKeyAlias:t.data.data.openApiKey.openApiKeyAlias)}}const ve=function(){return{width:"100%"}},Re=function(){return{width:"95%"}};function Te(a,l){if(1&a&&e._UZ(0,"p-calendar",28),2&a){const t=e.oxw();e.Akn(e.DdM(6,ve)),e.Q6J("showIcon",!0)("readonlyInput",!0)("minDate",t.minDateValue)("inputStyle",e.DdM(7,Re))}}function Oe(a,l){if(1&a&&(e.TgZ(0,"div",25)(1,"small",26),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&a){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,1,t.expiredAt.errors.isRequired))}}function Pe(a,l){if(1&a&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Oqu(t.checkFromOperation()?t.data.data.expiredAt:t.data.data.openApiKey.expiredAt)}}function Ze(a,l){1&a&&e._UZ(0,"input",29)}function De(a,l){if(1&a&&(e.TgZ(0,"div",25)(1,"small",26),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"small",26),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"small",26),e._uU(8),e.ALo(9,"translate"),e.qZA()()),2&a){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,3,t.timesThreshold.errors.isRequired)),e.xp6(3),e.Oqu(e.lcZ(6,5,t.timesThreshold.errors.max)),e.xp6(3),e.Oqu(e.lcZ(9,7,t.timesThreshold.errors.min))}}function Ke(a,l){if(1&a&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Oqu(t.checkFromOperation()?t.data.data.timesThreshold:t.data.data.openApiKey.timesThreshold)}}function Ce(a,l){if(1&a&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Oqu(t.data.data.secretKey)}}function Ne(a,l){if(1&a&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Oqu(t.data.data.openApiKey.secretKey)}}function Le(a,l){if(1&a&&(e.TgZ(0,"label"),e._uU(1),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Oqu(t.data.data.openApiKey.secretKey)}}function Ie(a,l){if(1&a&&(e.TgZ(0,"div",2)(1,"div",16)(2,"label",4),e._uU(3,"Secret Key"),e.qZA(),e._uU(4,"\uff1a "),e.YNc(5,Ce,2,1,"label",5),e.YNc(6,Ne,2,1,"label",5),e.YNc(7,Le,2,1,"label",5),e.qZA()()),2&a){const t=e.oxw();e.xp6(5),e.Q6J("ngIf",t.data.operate==t.formOperate.create),e.xp6(1),e.Q6J("ngIf",t.data.operate==t.formOperate.update),e.xp6(1),e.Q6J("ngIf",t.data.operate==t.formOperate.resend)}}function Ee(a,l){1&a&&(e.TgZ(0,"label",30),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"apply_desc")))}function we(a,l){1&a&&(e.TgZ(0,"label",31),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"new_apply_desc")))}function Fe(a,l){if(1&a&&(e.TgZ(0,"div",25)(1,"small",26),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"small",26),e._uU(5),e.ALo(6,"translate"),e.qZA()()),2&a){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,t.reqDesc.errors.isRequired)),e.xp6(3),e.Oqu(e.lcZ(6,4,t.reqDesc.errors.maxlength))}}function Ue(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"div")(1,"label",32),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._uU(4,"\uff1a "),e.TgZ(5,"div",33)(6,"input",34),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().searchAPI()}),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",35),e.NdJ("click",function(){return e.CHM(t),e.oxw().searchAPI()}),e.qZA()()()}2&a&&(e.xp6(2),e.Oqu(e.lcZ(3,2,"choose_api")),e.xp6(4),e.s9C("placeholder",e.lcZ(7,4,"keyword_search")))}function Be(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"div",43)(1,"button",44),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).delete()}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"button.delete")," "))}function Ye(a,l){1&a&&e.YNc(0,Be,4,3,"ng-template",42)}function Me(a,l){1&a&&e._UZ(0,"col",47)}function He(a,l){1&a&&e._UZ(0,"col"),2&a&&e.Udp("width",l.$implicit.width)}function ke(a,l){if(1&a&&(e.TgZ(0,"colgroup"),e.YNc(1,Me,1,0,"col",45),e.YNc(2,He,1,2,"col",46),e.qZA()),2&a){const t=l.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngIf","OPEN_API_KEY_REVOKE"!=i.data.data.reqSubtype),e.xp6(1),e.Q6J("ngForOf",t)}}function Je(a,l){1&a&&(e.TgZ(0,"th",50),e._UZ(1,"p-tableHeaderCheckbox"),e.qZA())}function Se(a,l){if(1&a&&(e.TgZ(0,"th",51),e._uU(1),e.qZA()),2&a){const t=l.$implicit;e.Udp("width",t.width),e.xp6(1),e.hij(" ",t.header," ")}}function $e(a,l){if(1&a&&(e.TgZ(0,"tr"),e.YNc(1,Je,2,0,"th",48),e.YNc(2,Se,2,3,"th",49),e.qZA()),2&a){const t=l.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngIf","OPEN_API_KEY_REVOKE"!=i.data.data.reqSubtype),e.xp6(1),e.Q6J("ngForOf",t)}}function Qe(a,l){if(1&a&&(e.TgZ(0,"td"),e._UZ(1,"p-tableCheckbox",52),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("value",t)}}function je(a,l){if(1&a&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&a){const t=e.oxw(2).$implicit;e.xp6(1),e.lnq(" (",t.apiKey,",",t.moduleName,") - ",t.apiName," ")}}function We(a,l){if(1&a&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit,i=e.oxw().$implicit;e.xp6(1),e.Oqu(i[t.field])}}function Ge(a,l){1&a&&(e.TgZ(0,"span"),e._uU(1,"\uff0c"),e.qZA())}function Ve(a,l){if(1&a&&(e.TgZ(0,"span"),e._uU(1),e.YNc(2,Ge,2,0,"span",5),e.qZA()),2&a){const t=l.$implicit,i=l.index,d=e.oxw(2).$implicit,_=e.oxw().$implicit,A=e.oxw(2);e.xp6(1),e.hij(" ",t.value," "),e.xp6(1),e.Q6J("ngIf",A.checkLength(_[d.field],i))}}function ze(a,l){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,Ve,3,2,"span",53),e.ALo(2,"keyvalue"),e.qZA()),2&a){const t=e.oxw().$implicit,i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,i[t.field]))}}function Xe(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"span")(1,"a",54),e.NdJ("click",function(){e.CHM(t);const d=e.oxw(2).$implicit;return e.oxw(2).downloadFile(d.filePath,d.fileName)}),e._uU(2),e.qZA()()}if(2&a){const t=e.oxw().$implicit,i=e.oxw().$implicit;e.xp6(2),e.hij(" ",i[t.field]," ")}}function et(a,l){if(1&a&&(e.TgZ(0,"td"),e.YNc(1,je,2,3,"span",5),e.YNc(2,We,2,1,"span",5),e.YNc(3,ze,3,3,"div",5),e.YNc(4,Xe,3,1,"span",5),e.qZA()),2&a){const t=l.$implicit;e.Udp("width",t.width),e.xp6(1),e.Q6J("ngIf","apiName"==t.field),e.xp6(1),e.Q6J("ngIf","apiName"!=t.field&&"themeDatas"!=t.field&&"fileName"!=t.field),e.xp6(1),e.Q6J("ngIf","themeDatas"==t.field),e.xp6(1),e.Q6J("ngIf","fileName"==t.field)}}function tt(a,l){if(1&a&&(e.TgZ(0,"tr"),e.YNc(1,Qe,2,1,"td",5),e.YNc(2,et,5,6,"td",46),e.qZA()),2&a){const t=l.columns,i=e.oxw(2);e.xp6(1),e.Q6J("ngIf","OPEN_API_KEY_REVOKE"!=i.data.data.reqSubtype),e.xp6(1),e.Q6J("ngForOf",t)}}function at(a,l){if(1&a&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&a){const t=e.oxw().$implicit,i=e.oxw(2);e.xp6(1),e.uIk("colspan","OPEN_API_KEY_REVOKE"!=i.data.data.reqSubtype?t.length+1:t.length),e.xp6(1),e.AsE(" ",e.lcZ(3,3,"row_count"),": ",i.rowcount,"")}}function it(a,l){if(1&a&&e.YNc(0,at,4,5,"tr",5),2&a){const t=e.oxw(2);e.Q6J("ngIf",t.rowcount)}}function ot(a,l){if(1&a&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&a){const t=l.$implicit,i=e.oxw(2);e.xp6(1),e.uIk("colspan","OPEN_API_KEY_REVOKE"!=i.data.data.reqSubtype?t.length+1:t.length),e.xp6(1),e.hij(" ",e.lcZ(3,2,"no_rec")," ")}}const nt=function(){return{"word-break":"break-word"}};function pt(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"p-table",36),e.NdJ("selectionChange",function(d){return e.CHM(t),e.oxw().selectedApis=d}),e.YNc(1,Ye,1,0,null,5),e.YNc(2,ke,3,2,"ng-template",37),e.YNc(3,$e,3,2,"ng-template",38),e.YNc(4,tt,3,2,"ng-template",39),e.YNc(5,it,1,1,"ng-template",40),e.YNc(6,ot,4,4,"ng-template",41),e.qZA()}if(2&a){const t=e.oxw();e.Akn(e.DdM(6,nt)),e.Q6J("columns",t.cols)("value",t.apiList)("selection",t.selectedApis),e.xp6(1),e.Q6J("ngIf","OPEN_API_KEY_REVOKE"!=t.data.data.reqSubtype)}}const C=function(a){return{required:a}};let lt=(()=>{class a extends c.H{constructor(t,i,d,_,A,T,v,x,rt){super(t,i),this.fb=d,this.tool=_,this.file=A,this.ngxService=T,this.requisition=v,this.roleService=x,this.dialogService=rt,this.refresh=new e.vpe,this.formOperate=f.mi,this.cols=[],this.btnName="",this.dialogTitle="",this.apiList=new Array,this.selectedApis=new Array,this.rowcount=0,this.minDateValue=new Date,this.canSave=!1}ngOnInit(){var t=this;return(0,r.Z)(function*(){t.form=t.fb.group(t.resetFormGroup(t.data.operate));const d=yield t.tool.getDict(["button.save","api_desc","dept","button.update","button.resend","api_name","theme_name","api_doc"]);switch(t.cols=[{field:"apiName",header:d.api_name},{field:"apiDesc",header:d.api_desc},{field:"orgName",header:d.dept},{field:"themeDatas",header:d.theme_name},{field:"fileName",header:d.api_doc}],t.roleService.queryRTMapByUk({txIdList:["DPB0065"]}).subscribe(_=>{t.tool.checkDpSuccess(_.ResHeader)&&(t.canSave=!!_.RespBody.dataList.find(A=>"DPB0065"===A.txId)&&_.RespBody.dataList.find(A=>"DPB0065"===A.txId).available)}),t.data.operate){case f.mi.create:t.btnName=d["button.save"],0!=t.data.data.dataList.length&&(t.apiList=t.data.data.dataList,t.rowcount=t.apiList.length),"OPEN_API_KEY_REVOKE"==t.data.data.reqSubtype&&(t.openApiKeyAlias.disable(),t.expiredAt.disable(),t.timesThreshold.disable()),t.requisition.createReqOpenApiKey_beforer().subscribe(_=>{t.tool.checkDpSuccess(_.ResHeader)&&t.addFormValidator(t.form,_.RespBody.constraints)});break;case f.mi.update:case f.mi.resend:t.btnName=t.data.operate==f.mi.update?d["button.update"]:d["button.resend"],t.data.data.openApiKey.apiDatas.map(_=>{let A=Object.keys(_.docFileInfo)[0];t.apiList.push({apiKey:_.apiKey,moduleName:_.moduleName,apiName:_.apiName,themeDatas:_.themeList,orgId:_.orgId,orgName:_.orgName,apiDesc:_.apiDesc,apiExtId:_.apiExtId,apiUid:_.apiUid,fileName:A,filePath:_.docFileInfo[A]})}),t.rowcount=t.apiList.length,t.requisition.resendReq_before().subscribe(_=>{t.tool.checkDpSuccess(_.ResHeader)&&t.addFormValidator(t.form,_.RespBody.constraints)})}})()}checkFromOperation(){return this.data.operate==f.mi.create}searchAPI(){var t=this;return(0,r.Z)(function*(){const d=yield t.tool.getDict(["api_list"]);t.dialogTitle=d.api_list,t.dialogService.open(Q,{data:{operate:f.mi.create,data:{keyword:t.keyword.value}},width:"80vw",height:"100vh",header:d.api_list}).onClose.subscribe(A=>{if(A){let T=new Set;t.apiList.map(v=>{T.add(v.apiUid)}),A.map(v=>{T.has(v.apiUid)||t.apiList.push(v)}),t.rowcount=t.apiList.length}})})()}checkLength(t,i){return Object.keys(t).length>1&&i+1!=Object.keys(t).length}delete(){this.selectedApis.map(t=>{this.apiList=this.apiList.filter(i=>i.apiUid!=t.apiUid)}),this.selectedApis=[],this.rowcount=this.apiList.length}downloadFile(t,i){this.file.downloadFile({filePath:t}).subscribe(_=>{const A=new FileReader;A.onloadend=function(){const T=new File([_],i),v=window.URL.createObjectURL(T),x=document.createElement("a");document.body.appendChild(x),x.setAttribute("style","display: none"),x.href=v,x.download=i,x.click(),window.URL.revokeObjectURL(v),x.remove()},A.readAsText(_)})}submitForm(){switch(this.data.operate){case f.mi.create:this.createRequisition();break;case f.mi.update:case f.mi.resend:this.updateOrResendRequisition()}}createRequisition(){var t=this;let i={reqType:"OPEN_API_KEY",reqSubtype:this.data.data.reqSubtype,reqDesc:this.reqDesc.value,effectiveDate:h(this.effectiveDate.value).format("YYYY/MM/DD"),openApiKeyD:{clientId:this.data.data.clientId,openApiKeyAlias:this.openApiKeyAlias.value,timesThreshold:this.timesThreshold.value,expiredAt:h(this.expiredAt.value).format("YYYY/MM/DD"),apiUids:this.convertApiUids()}};"OPEN_API_KEY_APPLICA"!=this.data.data.reqSubtype&&(i.openApiKeyD.openApiKeyId=this.data.data.openApiKeyId,i.openApiKeyD.openApiKey=this.data.data.openApiKey,i.openApiKeyD.secretKey=this.data.data.secretKey),this.ngxService.start(),this.requisition.createReq(i).subscribe(function(){var d=(0,r.Z)(function*(_){t.tool.checkDpSuccess(_.ResHeader)&&(t.ngxService.stop(),t.clearData(),t.refresh.emit(!0))});return function(_){return d.apply(this,arguments)}}())}updateOrResendRequisition(){let t={reqOrdermId:this.data.data.reqOrdermId,lv:this.data.data.lv,act:this.data.operate==f.mi.update?"U":"R",reqDesc:this.reqDesc.value,effectiveDate:h(this.effectiveDate.value).format("YYYY/MM/DD"),openApiKeyD:{clientId:this.data.data.openApiKey.clientId,openApiKeyAlias:this.openApiKeyAlias.value,timesThreshold:this.timesThreshold.value,expiredAt:h(this.expiredAt.value).format("YYYY/MM/DD"),apiUids:this.convertApiUids()}};"OPEN_API_KEY_APPLICA"!=this.data.data.reqSubtype&&(t.openApiKeyD.openApiKeyId=this.data.data.openApiKey.openApiKeyId,t.openApiKeyD.openApiKey=this.data.data.openApiKey.openApiKey,t.openApiKeyD.secretKey=this.data.data.openApiKey.secretKey),this.requisition.resendReq(t).subscribe(i=>{this.tool.checkDpSuccess(i.ResHeader)&&this.close&&this.close((0,j.of)(i.RespBody))})}convertApiUids(){let t=[];return this.apiList.map(i=>{t.push(i.apiUid)}),t}resetFormGroup(t){if(!t)return{keyword:"",openApiKeyAlias:"",effectiveDate:"",timesThreshold:"",reqDesc:"",expiredAt:""};switch(t){case f.mi.create:return{keyword:new m.NI(""),effectiveDate:new m.NI(h(new Date).format("YYYY/MM/DD"),R.np()),openApiKeyAlias:new m.NI(this.data.data.openApiKeyAlias,R.np()),expiredAt:new m.NI(""!=this.data.data.expiredAt?h(this.data.data.expiredAt).format("YYYY/MM/DD"):"",R.np()),timesThreshold:new m.NI(this.data.data.timesThreshold,R.np()),reqDesc:new m.NI("",R.np())};case f.mi.update:case f.mi.resend:let i=this.data.data;return{keyword:new m.NI(""),effectiveDate:new m.NI(i.effectiveDate,R.np()),openApiKeyAlias:new m.NI(i.openApiKey.openApiKeyAlias,R.np()),expiredAt:new m.NI(i.openApiKey.expiredAt,R.np()),timesThreshold:new m.NI(i.openApiKey.timesThreshold,R.np()),reqDesc:new m.NI(i.reqDesc,R.np())};default:return{keyword:"",openApiKeyAlias:"",effectiveDate:"",timesThreshold:"",reqDesc:"",expiredAt:""}}}clearData(){this.form.reset(""),this.apiList=[],this.rowcount=this.apiList.length,this.selectedApis=[]}get keyword(){return this.form.get("keyword")}get openApiKeyAlias(){return this.form.get("openApiKeyAlias")}get effectiveDate(){return this.form.get("effectiveDate")}get timesThreshold(){return this.form.get("timesThreshold")}get reqDesc(){return this.form.get("reqDesc")}get expiredAt(){return this.form.get("expiredAt")}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(W.gz),e.Y36(G.W),e.Y36(m.qu),e.Y36(b.g),e.Y36(o.I),e.Y36(V.LA),e.Y36(z.H),e.Y36(X.N),e.Y36(p.xA))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-open-api-key-form"]],viewQuery:function(t,i){if(1&t&&e.Gf(ae,5),2&t){let d;e.iGM(d=e.CRH())&&(i._dialog=d.first)}},inputs:{data:"data"},outputs:{refresh:"refresh",close:"close"},features:[e.qOj],decls:105,vars:79,consts:[[1,"card","card-body","bg-light","mt-3"],[3,"formGroup"],[1,"form-group","row"],[1,"col-4","col-xl-4","col-lg-4"],[1,"control-label"],[4,"ngIf"],["id","effectiveDate_label","for","effectiveDate",1,"required","control-label"],["dateFormat","yy/mm/dd","appendTo","body","formControlName","effectiveDate","id","effectiveDate",3,"showIcon","readonlyInput","minDate"],["class","text-danger",4,"ngIf"],["class","form-group row",4,"ngIf"],["id","openApiKeyAlias_label","for","openApiKeyAlias",1,"control-label",3,"ngClass"],["type","text","class","form-control","id","openApiKeyAlias","formControlName","openApiKeyAlias",4,"ngIf"],["id","expiredAt_label","for","expiredAt",1,"control-label",3,"ngClass"],["dateFormat","yy/mm/dd","appendTo","body","formControlName","expiredAt","id","expiredAt",3,"showIcon","readonlyInput","minDate","style","inputStyle",4,"ngIf"],["id","timesThreshold_label","for","timesThreshold",1,"control-label",3,"ngClass"],["type","number","class","form-control","formControlName","timesThreshold","min","-1","onkeyup","this.value=Math.round(this.value)","id","timesThreshold","onafterpaste","this.value=Math.round(this.value)",4,"ngIf"],[1,"col-12","col-xl-12","col-lg-12"],["id","reqDesc_label","for","reqDesc","class","required control-label",4,"ngIf"],["id","reqDesc_label","for","reqDesc","class","control-label",4,"ngIf"],["rows","5","formControlName","reqDesc","id","reqDesc",1,"form-control"],["selectionMode","single","styleClass","p-datatable-striped",3,"columns","value","selection","style","selectionChange",4,"ngIf"],[1,"text-center"],["type","button",1,"btn","tpi-btn","tpi-primary","mt-2",3,"disabled","click"],[3,"title"],["dialog",""],[1,"text-danger"],[1,"form-text"],["type","text","id","openApiKeyAlias","formControlName","openApiKeyAlias",1,"form-control"],["dateFormat","yy/mm/dd","appendTo","body","formControlName","expiredAt","id","expiredAt",3,"showIcon","readonlyInput","minDate","inputStyle"],["type","number","formControlName","timesThreshold","min","-1","onkeyup","this.value=Math.round(this.value)","id","timesThreshold","onafterpaste","this.value=Math.round(this.value)",1,"form-control"],["id","reqDesc_label","for","reqDesc",1,"required","control-label"],["id","reqDesc_label","for","reqDesc",1,"control-label"],[1,"required","control-label",2,"font-weight","bolder"],[1,"ui-inputgroup","mb-1"],["type","text","formControlName","keyword",1,"form-control",3,"placeholder","keyup.enter"],["pButton","","type","button","icon","pi pi-search",1,"tpi-night","ml-1",3,"click"],["selectionMode","single","styleClass","p-datatable-striped",3,"columns","value","selection","selectionChange"],["pTemplate","colgroup"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["pTemplate","emptymessage"],["pTemplate","caption"],[1,"ui-helper-clearfix"],["type","button",1,"btn","tpi-btn","tpi-primary","float-left",3,"click"],["style","width: 2.25em",4,"ngIf"],[3,"width",4,"ngFor","ngForOf"],[2,"width","2.25em"],["style","width: 2.25em","scope","col",4,"ngIf"],["scope","col",3,"width",4,"ngFor","ngForOf"],["scope","col",2,"width","2.25em"],["scope","col"],[3,"value"],[4,"ngFor","ngForOf"],["href","javascript:void(0)",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5),e.ALo(6,"translate"),e.qZA(),e._uU(7,"\uff1a "),e.YNc(8,ie,2,1,"label",5),e.YNc(9,oe,2,1,"label",5),e.qZA(),e.TgZ(10,"div",3)(11,"label",4),e._uU(12),e.ALo(13,"translate"),e.qZA(),e._uU(14,"\uff1a "),e.YNc(15,ne,2,1,"label",5),e.YNc(16,pe,2,1,"label",5),e.qZA(),e.TgZ(17,"div",3)(18,"label",4),e._uU(19),e.ALo(20,"translate"),e.qZA(),e._uU(21,"\uff1a "),e.YNc(22,le,2,1,"label",5),e.YNc(23,re,2,1,"label",5),e.qZA()(),e.TgZ(24,"div",2)(25,"div",3)(26,"label",4),e._uU(27),e.ALo(28,"translate"),e.qZA(),e._uU(29,"\uff1a "),e.YNc(30,se,2,1,"label",5),e.YNc(31,ce,2,1,"label",5),e.qZA(),e.TgZ(32,"div",3)(33,"label",4),e._uU(34),e.ALo(35,"translate"),e.qZA(),e._uU(36,"\uff1a "),e.YNc(37,de,2,1,"label",5),e.YNc(38,_e,2,1,"label",5),e.qZA(),e.TgZ(39,"div",3)(40,"label",4),e._uU(41),e.ALo(42,"translate"),e.qZA(),e._uU(43,"\uff1a "),e.TgZ(44,"label"),e._uU(45),e.qZA()()(),e.TgZ(46,"div",2)(47,"div",3)(48,"label",4),e._uU(49),e.ALo(50,"translate"),e.qZA(),e._uU(51,"\uff1a "),e.YNc(52,ue,2,1,"label",5),e.YNc(53,me,2,1,"label",5),e.qZA(),e.TgZ(54,"div",3)(55,"label",6),e._uU(56),e.ALo(57,"translate"),e.qZA(),e._uU(58,"\uff1a "),e._UZ(59,"p-calendar",7),e.YNc(60,he,4,3,"div",8),e.qZA()(),e.YNc(61,ge,8,3,"div",9),e.TgZ(62,"div",2)(63,"div",3)(64,"label",10),e._uU(65),e.ALo(66,"translate"),e.qZA(),e._uU(67,"\uff1a "),e.YNc(68,be,1,0,"input",11),e.YNc(69,qe,7,6,"div",8),e.YNc(70,xe,2,1,"label",5),e.qZA(),e.TgZ(71,"div",3)(72,"label",12),e._uU(73),e.ALo(74,"translate"),e.qZA(),e._uU(75,"\uff1a "),e.YNc(76,Te,1,8,"p-calendar",13),e.YNc(77,Oe,4,3,"div",8),e.YNc(78,Pe,2,1,"label",5),e.qZA(),e.TgZ(79,"div",3)(80,"label",14),e._uU(81),e.ALo(82,"translate"),e.qZA(),e._uU(83,"\uff1a "),e.YNc(84,Ze,1,0,"input",15),e.YNc(85,De,10,9,"div",8),e.YNc(86,Ke,2,1,"label",5),e.qZA()(),e.YNc(87,Ie,8,3,"div",9),e.TgZ(88,"div",2)(89,"div",16),e.YNc(90,Ee,3,3,"label",17),e.YNc(91,we,3,3,"label",18),e._uU(92,"\uff1a "),e._UZ(93,"textarea",19),e.YNc(94,Fe,7,6,"div",8),e.qZA()(),e.TgZ(95,"div",2)(96,"div",16),e.YNc(97,Ue,9,6,"div",5),e.YNc(98,pt,7,7,"p-table",20),e.qZA()()(),e._UZ(99,"hr"),e.TgZ(100,"div",21)(101,"button",22),e.NdJ("click",function(){return i.submitForm()}),e._uU(102),e.qZA()()(),e._UZ(103,"app-dialog",23,24)),2&t&&(e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(4),e.Oqu(e.lcZ(6,51,"client_id")),e.xp6(3),e.Q6J("ngIf",i.data.operate==i.formOperate.create),e.xp6(1),e.Q6J("ngIf",i.data.operate!=i.formOperate.create),e.xp6(3),e.Oqu(e.lcZ(13,53,"client_name")),e.xp6(3),e.Q6J("ngIf",i.data.operate==i.formOperate.create),e.xp6(1),e.Q6J("ngIf",i.data.operate!=i.formOperate.create),e.xp6(3),e.Oqu(e.lcZ(20,55,"client_alias")),e.xp6(3),e.Q6J("ngIf",i.data.operate==i.formOperate.create),e.xp6(1),e.Q6J("ngIf",i.data.operate!=i.formOperate.create),e.xp6(4),e.Oqu(e.lcZ(28,57,"apply_date")),e.xp6(3),e.Q6J("ngIf",i.data.operate==i.formOperate.create),e.xp6(1),e.Q6J("ngIf",i.data.operate!=i.formOperate.create),e.xp6(3),e.Oqu(e.lcZ(35,59,"apply_user")),e.xp6(3),e.Q6J("ngIf",i.data.operate==i.formOperate.create),e.xp6(1),e.Q6J("ngIf",i.data.operate!=i.formOperate.create),e.xp6(3),e.Oqu(e.lcZ(42,61,"apply_org")),e.xp6(4),e.Oqu(i.data.data.orgName),e.xp6(4),e.Oqu(e.lcZ(50,63,"req_sub_type")),e.xp6(3),e.Q6J("ngIf",i.data.operate==i.formOperate.create),e.xp6(1),e.Q6J("ngIf",i.data.operate!=i.formOperate.create),e.xp6(3),e.Oqu(e.lcZ(57,65,"effective_date")),e.xp6(3),e.Q6J("showIcon",!0)("readonlyInput",!0)("minDate",i.minDateValue),e.xp6(1),e.Q6J("ngIf",(null==i.effectiveDate?null:i.effectiveDate.invalid)&&((null==i.effectiveDate?null:i.effectiveDate.dirty)||(null==i.effectiveDate?null:i.effectiveDate.touched))),e.xp6(1),e.Q6J("ngIf","OPEN_API_KEY_APPLICA"!=i.data.data.reqSubtype),e.xp6(3),e.Q6J("ngClass",e.VKq(73,C,"OPEN_API_KEY_REVOKE"!=i.data.data.reqSubtype)),e.xp6(1),e.Oqu(e.lcZ(66,67,"open_api_key_alias")),e.xp6(3),e.Q6J("ngIf","OPEN_API_KEY_REVOKE"!=i.data.data.reqSubtype),e.xp6(1),e.Q6J("ngIf",(null==i.openApiKeyAlias?null:i.openApiKeyAlias.invalid)&&((null==i.openApiKeyAlias?null:i.openApiKeyAlias.dirty)||(null==i.openApiKeyAlias?null:i.openApiKeyAlias.touched))),e.xp6(1),e.Q6J("ngIf","OPEN_API_KEY_REVOKE"==i.data.data.reqSubtype),e.xp6(2),e.Q6J("ngClass",e.VKq(75,C,"OPEN_API_KEY_REVOKE"!=i.data.data.reqSubtype)),e.xp6(1),e.Oqu(e.lcZ(74,69,"expired_date")),e.xp6(3),e.Q6J("ngIf","OPEN_API_KEY_REVOKE"!=i.data.data.reqSubtype),e.xp6(1),e.Q6J("ngIf",(null==i.expiredAt?null:i.expiredAt.invalid)&&((null==i.expiredAt?null:i.expiredAt.dirty)||(null==i.expiredAt?null:i.expiredAt.touched))),e.xp6(1),e.Q6J("ngIf","OPEN_API_KEY_REVOKE"==i.data.data.reqSubtype),e.xp6(2),e.Q6J("ngClass",e.VKq(77,C,"OPEN_API_KEY_REVOKE"!=i.data.data.reqSubtype)),e.xp6(1),e.Oqu(e.lcZ(82,71,"times_threshold")),e.xp6(3),e.Q6J("ngIf","OPEN_API_KEY_REVOKE"!=i.data.data.reqSubtype),e.xp6(1),e.Q6J("ngIf",(null==i.timesThreshold?null:i.timesThreshold.invalid)&&((null==i.timesThreshold?null:i.timesThreshold.dirty)||(null==i.timesThreshold?null:i.timesThreshold.touched))),e.xp6(1),e.Q6J("ngIf","OPEN_API_KEY_REVOKE"==i.data.data.reqSubtype),e.xp6(1),e.Q6J("ngIf","OPEN_API_KEY_APPLICA"!=i.data.data.reqSubtype),e.xp6(3),e.Q6J("ngIf",i.data.operate==i.formOperate.create),e.xp6(1),e.Q6J("ngIf",i.data.operate!=i.formOperate.create),e.xp6(3),e.Q6J("ngIf",(null==i.reqDesc?null:i.reqDesc.invalid)&&((null==i.reqDesc?null:i.reqDesc.dirty)||(null==i.reqDesc?null:i.reqDesc.touched))),e.xp6(3),e.Q6J("ngIf","OPEN_API_KEY_REVOKE"!=i.data.data.reqSubtype),e.xp6(1),e.Q6J("ngIf",i.cols),e.xp6(3),e.Q6J("disabled",i.form.invalid||0==i.apiList.length||0==i.canSave),e.xp6(1),e.Oqu(i.btnName),e.xp6(1),e.Q6J("title",i.dialogTitle))},directives:[m._Y,m.JL,m.sg,y.O5,ee.f,m.JJ,m.u,y.mk,m.Fj,m.wV,m.qQ,u.Hq,g.iA,P.jx,y.sg,g.Mo,g.UA,te.a],pipes:[Z.X$,y.Nd],styles:[""]}),a})()},63710:(O,q,s)=>{s.d(q,{e:()=>o});var r=s(87587),c=s(69808),e=s(51062);function m(n,p){if(1&n&&(r.TgZ(0,"div",9)(1,"h3",10),r._uU(2),r.ALo(3,"translate"),r.qZA()()),2&n){const u=r.oxw();r.xp6(2),r.Oqu(r.lcZ(3,1,u.title))}}function f(n,p){if(1&n){const u=r.EpF();r.TgZ(0,"div",11)(1,"button",12),r.NdJ("click",function(){return r.CHM(u),r.oxw().return()}),r._UZ(2,"i",13),r._uU(3),r.ALo(4,"translate"),r.qZA(),r.TgZ(5,"span",14),r._uU(6),r.qZA(),r.TgZ(7,"span",15),r._uU(8),r.qZA()()}if(2&n){const u=r.oxw();r.xp6(3),r.hij(" ",r.lcZ(4,3,"button.return_to_list")," "),r.xp6(3),r.hij("",u.getHead()," /"),r.xp6(2),r.Oqu(u.getTail())}}const h=[[["","center-view","center"]],"*"],b=["[center-view=center]","*"];let o=(()=>{class n{constructor(){this.title="",this.isDefault=!0,this.headerReturn=new r.vpe}ngOnInit(){}return(){this.headerReturn.emit(null)}getHead(){const u=this.title.indexOf(">")>-1?this.title.split(">"):[this.title];return u.pop(),u.join(" / ")}getTail(){const u=this.title.indexOf(">")>-1?this.title.split(">"):[this.title];return u[u.length-1]}}return n.\u0275fac=function(u){return new(u||n)},n.\u0275cmp=r.Xpm({type:n,selectors:[["app-container"]],inputs:{title:"title",isDefault:"isDefault"},outputs:{headerReturn:"headerReturn"},ngContentSelectors:b,decls:11,vars:2,consts:[[1,"h-100"],[1,"container-fluid","h-100",2,"padding-left","10px","margin-top","10px"],[1,"row","h-100","position-relative"],[1,"col","pb-5"],[1,"card-title","row"],["class","col-12 col-md-12",4,"ngIf"],["class","col-12 col-md-12","style","text-align: right;",4,"ngIf"],[1,"col","d-flex","justify-content-center"],[1,"my-0","mb-2"],[1,"col-12","col-md-12"],["id","content",1,"bd-title","mb-0"],[1,"col-12","col-md-12",2,"text-align","right"],["type","button","icon","",1,"btn","float-left","tpi-header-return",3,"click"],[1,"fas","fa-arrow-left",2,"margin-right","5px"],[1,"bd-title","mb-0",2,"color","#666464"],[1,"bd-title","mb-0",2,"color","#FF6E38","font-weight","bold"]],template:function(u,y){1&u&&(r.F$t(h),r.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),r.YNc(5,m,4,3,"div",5),r.YNc(6,f,9,5,"div",6),r.TgZ(7,"div",7),r.Hsn(8),r.qZA()(),r._UZ(9,"hr",8),r.Hsn(10,1),r.qZA()()()()),2&u&&(r.xp6(5),r.Q6J("ngIf",y.isDefault),r.xp6(1),r.Q6J("ngIf",!y.isDefault))},directives:[c.O5],pipes:[e.X$],styles:[".card.card-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:400;color:#5a5541}"]}),n})()},86561:(O,q,s)=>{s.d(q,{a:()=>b});var r=s(87587),c=s(3937),e=s(15315);const m=["content"];function f(o,n){}const h=function(){return{height:"70vh"}};let b=(()=>{class o{constructor(p){this.ngxService=p,this.visible=!1,this.title="",this.closable=!0,this.width=300}open(p,u){this.contentRef.clear(),this.componentRef=this.contentRef.createComponent(p),this.componentRef.instance.data=u,this.componentRef.instance.close=this.onHide.bind(this),this.visible=!0}onHide(p){let u=this.componentRef.instance.data;this.componentRef.destroy(),this.visible=!1,p?p.subscribe(y=>{u&&u.afterCloseCallback&&u.afterCloseCallback(y),this.ngxService.stop()}):u&&u.afterCloseCallback&&(u.afterCloseCallback(),this.ngxService.stop())}setWidth(){return this.width+"px"}}return o.\u0275fac=function(p){return new(p||o)(r.Y36(c.LA))},o.\u0275cmp=r.Xpm({type:o,selectors:[["app-dialog"]],viewQuery:function(p,u){if(1&p&&r.Gf(m,7,r.s_b),2&p){let y;r.iGM(y=r.CRH())&&(u.contentRef=y.first)}},inputs:{visible:"visible",title:"title",closable:"closable",contentStyle:"contentStyle",width:"width"},decls:3,vars:10,consts:[["modal","true",3,"contentStyle","dismissableMask","header","visible","maximizable","draggable","closable","visibleChange","onHide"],["content",""]],template:function(p,u){1&p&&(r.TgZ(0,"p-dialog",0),r.NdJ("visibleChange",function(g){return u.visible=g})("onHide",function(){return u.onHide()}),r.YNc(1,f,0,0,"ng-template",null,1,r.W1O),r.qZA()),2&p&&(r.Akn(r.DdM(9,h)),r.Q6J("contentStyle",u.contentStyle)("dismissableMask",!0)("header",u.title)("visible",u.visible)("maximizable",!1)("draggable",!1)("closable",u.closable))},directives:[e.V],styles:[""]}),o})()},92718:(O,q,s)=>{s.d(q,{u:()=>p});var r=s(54004),c=s(70262),e=s(62843),m=s(87587),f=s(45682),h=s(89709),b=s(99291),o=s(3937),n=s(60991);let p=(()=>{class u{constructor(g,P,Z,D,K){this.toolService=g,this.tokenService=P,this.router=Z,this.ngxService=D,this.logoutService=K}canActivate(){return this.ngxService.stopAll(),!this.toolService.isTokenExpired()||this.toolService.refreshToken().pipe((0,r.U)(g=>!!g.access_token),(0,c.K)(this.handleError.bind(this)))}handleError(g){return setTimeout(()=>this.logoutService.logout()),(0,e._)(()=>g)}}return u.\u0275fac=function(g){return new(g||u)(m.LFG(f.g),m.LFG(h.B),m.LFG(b.F0),m.LFG(o.LA),m.LFG(n.P))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac}),u})()},86347:(O,q,s)=>{s.d(q,{DL:()=>r.D,u6:()=>e.u});var r=s(81233),e=(s(45240),s(92718));s(45682)},22734:(O,q,s)=>{s.d(q,{I:()=>f});var r=s(92340),c=s(57553),e=s(87587),m=s(96614);let f=(()=>{class h{constructor(o){this.api=o,this.api.baseUrl=r.N.dpPath}get basePath(){return r.N.isv4?"dgrv4/11":"tsmpdpaa/11"}downloadFile(o){return this.api.excuteDpGetFile(`${this.basePath}/DPB0078?filePath=${o.filePath}`)}uploadFile2(o){return this.api.excuteFileUpload(`${this.basePath}/DPB0082`,o)}exportClientRelated(){let o={ReqHeader:this.api.getReqHeader(c.Nx.exportClientRelated),ReqBody:{}};return this.api.excutePostGetFile(`${this.basePath}/AA1120`,o)}importClientRelated(o,n){return this.api.excuteTsmpSetting(`${this.basePath}/AA1121`,n,o)}importClientRelatedAllCover(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.importClientRelatedAllCover),ReqBody:o};return this.api.npPost(`${this.basePath}/AA1128`,n)}importClientRelatedConfirm(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.importClientRelatedConfirm),ReqBody:o};return this.api.npPost(`${this.basePath}/AA1129`,n)}}return h.\u0275fac=function(o){return new(o||h)(e.LFG(m.K))},h.\u0275prov=e.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},71330:(O,q,s)=>{s.d(q,{l:()=>f});var r=s(92340),c=s(57553),e=s(87587),m=s(96614);let f=(()=>{class h{constructor(o){this.api=o,this.api.baseUrl=r.N.dpPath}get basePath(){return r.N.isv4?"dgrv4/11":"tsmpdpaa/11"}queryOpenApiKeyByClientId(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.queryOpenApiKeyByClientId),ReqBody:o};return this.api.npPost(`${this.basePath}/DPB0090`,n)}queryOpenApiKeyDetailByPk(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.queryOpenApiKeyDetailByPk),ReqBody:o};return this.api.npPost(`${this.basePath}/DPB0091`,n)}writeOpenApiKeyReq(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.writeOpenApiKeyReq),ReqBody:o};return this.api.npPost(`${this.basePath}/DPB0092`,n)}queryApiLikeList(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.queryApiLikeList),ReqBody:o};return this.api.npPost(`${this.basePath}/DPB0093`,n)}queryOpenApiKeyByDateAndLike_before(){let o={ReqHeader:this.api.getReqHeader(c.Nx.queryOpenApiKeyByDateAndLike),ReqBody:{}};return this.api.npPost(`${this.basePath}/DPB0094?before`,o)}queryOpenApiKeyByDateAndLike_ignore1298(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.queryOpenApiKeyByDateAndLike),ReqBody:o};return this.api.excuteNpPost_ignore1298(`${this.basePath}/DPB0094`,n)}queryOpenApiKeyByDateAndLike(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.queryOpenApiKeyByDateAndLike),ReqBody:o};return this.api.npPost(`${this.basePath}/DPB0094`,n)}queryClientListByRegStatusLike_ignore1298(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.queryClientListByRegStatusLike),ReqBody:o};return this.api.excuteNpPost_ignore1298(`${this.basePath}/DPB0095`,n)}queryClientListByRegStatusLike(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.queryClientListByRegStatusLike),ReqBody:o};return this.api.npPost(`${this.basePath}/DPB0095`,n)}}return h.\u0275fac=function(o){return new(o||h)(e.LFG(m.K))},h.\u0275prov=e.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},37410:(O,q,s)=>{s.d(q,{H:()=>f});var r=s(92340),c=s(57553),e=s(87587),m=s(96614);let f=(()=>{class h{constructor(o){this.api=o,this.api.baseUrl=r.N.dpPath}get basePath(){return r.N.isv4?"dgrv4/11":"tsmpdpaa/11"}createReq(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.createReq),ReqBody:o};return this.api.npPost(`${this.basePath}/DPB0065`,n)}createReq_beforer(){let o={ReqHeader:this.api.getReqHeader(c.Nx.createReq),ReqBody:{}};return this.api.npPost(`${this.basePath}/DPB0065APIApplication?before`,o)}createReqOpenApiKey_beforer(){let o={ReqHeader:this.api.getReqHeader(c.Nx.createReq),ReqBody:{}};return this.api.npPost(`${this.basePath}/DPB0065OpenAPIKey?before`,o)}createReqClientReq_beforer(){let o={ReqHeader:this.api.getReqHeader(c.Nx.createReq),ReqBody:{}};return this.api.npPost(`${this.basePath}/DPB0065ClientReq?before`,o)}resendReq(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.resendReq),ReqBody:o};return this.api.npPost(`${this.basePath}/DPB0066`,n)}resendReq_before(){let o={ReqHeader:this.api.getReqHeader(c.Nx.resendReq),ReqBody:{}};return this.api.npPost(`${this.basePath}/DPB0066OpenAPIKey?before2`,o)}queryReqLikeList_ignore1298(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.queryReqLikeList),ReqBody:o};return this.api.excuteNpPost_ignore1298(`${this.basePath}/DPB0067`,n)}queryReqLikeList(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.queryReqLikeList),ReqBody:o};return this.api.npPost(`${this.basePath}/DPB0067`,n)}queryReqByPk(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.queryReqByPk),ReqBody:o};return this.api.npPost(`${this.basePath}/DPB0068`,n)}queryHistoryByPk(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.queryHistoryByPk),ReqBody:o};return this.api.npPost(`${this.basePath}/DPB0069`,n)}}return h.\u0275fac=function(o){return new(o||h)(e.LFG(m.K))},h.\u0275prov=e.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},1955:(O,q,s)=>{s.d(q,{N:()=>f});var r=s(92340),c=s(57553),e=s(87587),m=s(96614);let f=(()=>{class h{constructor(o){this.api=o,this.api.baseUrl=r.N.dpPath}get basePath(){return r.N.isv4?"dgrv4/11":"tsmpdpaa/11"}addTRole(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.addTRole),ReqBody:o};return this.api.npPost(`${this.basePath}/AA0011`,n)}updateTRoleFunc(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.updateTRoleFunc),ReqBody:o};return this.api.npPost(`${this.basePath}/AA0013`,n)}deleteTRole(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.deleteTRole),ReqBody:o};return this.api.npPost(`${this.basePath}/AA0014`,n)}addTRoleRoleMap(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.addTRoleRoleMap),ReqBody:o};return this.api.npPost(`${this.basePath}/AA0016`,n)}deleteTRoleRoleMap(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.deleteTRoleRoleMap),ReqBody:o};return this.api.npPost(`${this.basePath}/AA0017`,n)}updateTRoleRoleMap(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.updateTRoleRoleMap),ReqBody:o};return this.api.npPost(`${this.basePath}/AA0018`,n)}queryTRoleList_v3_ignore1298(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.queryTRoleList_v3),ReqBody:o};return this.api.excuteNpPost_ignore1298(`${this.basePath}/AA0020`,n)}queryTRoleList_v3(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.queryTRoleList_v3),ReqBody:o};return this.api.npPost(`${this.basePath}/AA0020`,n)}queryTRoleRoleMapDetail(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.queryTRoleRoleMapDetail),ReqBody:o};return this.api.npPost(`${this.basePath}/AA0021`,n)}queryTRoleRoleMap_ignore1298(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.queryTRoleList_v3),ReqBody:o};return this.api.excuteNpPost_ignore1298(`${this.basePath}/AA0022`,n)}queryTRoleRoleMap(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.queryTRoleList_v3),ReqBody:o};return this.api.npPost(`${this.basePath}/AA0022`,n)}queryRoleRoleList(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.queryRoleRoleList),ReqBody:o};return this.api.npPost(`${this.basePath}/AA0023`,n)}createRTMap_before(){let o={ReqHeader:this.api.getReqHeader(c.Nx.createRTMap),ReqBody:{}};return this.api.npPost(`${this.basePath}/DPB0110?before`,o)}createRTMap(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.createRTMap),ReqBody:o};return this.api.npPost(`${this.basePath}/DPB0110`,n)}queryRTMapList_ignore1298(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.queryRTMapList),ReqBody:o};return this.api.excuteNpPost_ignore1298(`${this.basePath}/DPB0111`,n)}queryRTMapList(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.queryRTMapList),ReqBody:o};return this.api.npPost(`${this.basePath}/DPB0111`,n)}queryRTMapByPk(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.queryRTMapByPk),ReqBody:o};return this.api.npPost(`${this.basePath}/DPB0112`,n)}updateRTMap_before(){let o={ReqHeader:this.api.getReqHeader(c.Nx.updateRTMap),ReqBody:{}};return this.api.npPost(`${this.basePath}/DPB0113?before`,o)}updateRTMap(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.updateRTMap),ReqBody:o};return this.api.npPost(`${this.basePath}/DPB0113`,n)}deleteRTMap(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.deleteRTMap),ReqBody:o};return this.api.npPost(`${this.basePath}/DPB0114`,n)}queryRTMapByUk(o){let n={ReqHeader:this.api.getReqHeader(c.Nx.queryRTMapByUk),ReqBody:o};return this.api.npPost(`${this.basePath}/DPB0115`,n)}}return h.\u0275fac=function(o){return new(o||h)(e.LFG(m.K))},h.\u0275prov=e.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()}}]);